"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3890],{40706:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var n=a(30758),r=a(95440),i=a(1978),c=a(75627),o=a(64721),s=a(9498),d=a(49345),l=a(95052),u=a(50684),k=a(32751),f=a(43915),g=a(86070);const h=n.memo((function(){const e=(0,i.Zp)(),t=(0,i.zy)(),a=(0,f.m)(),h=(0,k.z)(),{trackId:m=""}=(0,i.g)(),{isAnonymous:p}=(0,r.d4)(l.Ht),b=(0,n.useMemo)((()=>new URLSearchParams(t.search)),[t.search]),U=b.get("context")||"",y=(0,c.Mce)(m).toURI(),_=(0,d.J)({uri:y},{gcTime:30*u.i}),x=(0,n.useCallback)(((t,a)=>{const n=h.getState(),r=(0,c.o_h)(a)?.toURLPath(!0);b.delete("context");const i=b.toString()?`&${b.toString()}`:"",o=`${r}?highlight=${y}${i}`;p?e(o):(n&&!n.isPaused||t>-1&&h.play({uri:a},{featureIdentifier:"track",referrerIdentifier:"deeplink"},{skipTo:{index:t}}),e(o,{replace:!0}))}),[e,p,h,y,b]),I=(0,n.useCallback)((()=>{if(!_.loading&&_.data?.trackUnion&&"Track"===_.data.trackUnion.__typename){const e=(_.data.trackUnion.albumOfTrack?.tracks?.items??[]).findIndex((e=>e.track.uri===y));e>=0&&x(e,_.data.trackUnion.albumOfTrack?.uri||"")}}),[x,_,y]);return(0,n.useEffect)((()=>{const e=(0,c.tbX)(U);U&&e?a.getContents(U).then((e=>{const t=e.items.findIndex((e=>e?.uri===y));t<0?I():x(t,U)})):I()}),[U,I,x,a,y]),_.loading||_.error||"Track"!==_.data?.trackUnion?.__typename?(0,g.jsx)(s.LoadingPage,{hasError:!_.loading,errorMessage:o.Ru.get("track-page.error")}):null})),m=h}}]);
//# sourceMappingURL=xpui-routes-track.js.map