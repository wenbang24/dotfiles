"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{52633:(e,t,a)=>{a.d(t,{I:()=>o});var s=a(30758),i=a(60007),r=a(89494),n=a(49066),l=a(86070);const o=s.memo((function({uri:e,size:t=i.M.md,className:a,onClick:o,canDownload:c,condensedAll:u}){const[d,m]=(0,n.A)(e),p=(0,r.W)(),x=(0,s.useCallback)((()=>{p({targetUri:e,intent:d?"unsave":"save",type:"click"}),m(!d)}),[p,e,d,m]);return(0,l.jsx)(i.f,{className:a,isFollowing:d,onFollow:x,onClick:o,uri:e,size:t,canDownload:c,condensedAll:u,condensed:!0})}))},8541:(e,t,a)=>{a.d(t,{w:()=>m});var s=a(30758),i=a(97500),r=a.n(i),n=a(23965),l=a(64721),o=a(53998),c=a(48090);const u="pvGZ831aNzHTQMZ8CA_u";var d=a(86070);const m=(0,s.memo)((function({onClick:e=(()=>{}),size:t,className:a,uri:i,sharingInfo:m,interactionData:p,ariaLabel:x=l.Ru.get("mwp.list.item.share"),condensedAll:h,placement:g,semanticColor:y,disableTooltip:f}){const{onCopyLink:b}=(0,c.L)({sharingInfo:m,uri:i,interactionData:p}),A=(0,s.useCallback)((()=>{b(),e()}),[e,b]);return(0,d.jsx)(o.a,{ariaLabel:x,size:t,onClick:A,className:r()(u,a),icon:n.C,condensedAll:h,placement:g,condensed:!0,semanticColor:y,disableTooltip:f})}))},37199:(e,t,a)=>{a.d(t,{k:()=>u});var s=a(30758),i=a(97500),r=a.n(i),n=a(96930),l=a(98643),o=a(98455),c=a(86070);const u=(0,s.memo)((function(e){const{breakpoint:t,className:a,showSeparator:s,isActive:i,...u}=e;return(0,c.jsx)(n.v,{className:r()(a,o.A.entityRow,{[o.A.separator]:s,[o.A.active]:i}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===l.e.SMALL?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===l.e.SMALL?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...u})}))},21426:(e,t,a)=>{a.d(t,{X:()=>l});var s=a(6128);const i="dK79XxAEu3SEKJ2jS_Qy",r="guiUbDD6Ga8Qpatq2jQ8";var n=a(86070);const l=({badges:e,children:t})=>(0,n.jsxs)("div",{className:i,children:[e,(0,n.jsx)(s.E,{variant:"bodySmall",className:r,children:t})]})},88826:(e,t,a)=>{a.d(t,{q:()=>r});var s=a(55530),i=a(86070);const r=e=>(0,i.jsx)(s.R,{size:"small",version:s.H.secondary,...e})},22073:(e,t,a)=>{a.d(t,{k:()=>l});var s=a(95763),i=a(32875),r=a(98455),n=a(86070);const l=({description:e,children:t})=>(0,n.jsxs)("div",{className:r.A.body,children:[e&&(0,n.jsx)(s.v,{lineClamp:2,as:"div",dir:"auto",children:(0,n.jsx)(i.q,{asTextContent:!0,html:e})}),t]})},42664:(e,t,a)=>{a.d(t,{F:()=>r});var s=a(98455),i=a(86070);const r=({actions:e,playButton:t})=>(0,i.jsxs)("div",{className:s.A.footer,children:[(0,i.jsx)("div",{className:s.A.actions,children:e}),t]})},99101:(e,t,a)=>{a.d(t,{e:()=>o});var s=a(98643),i=a(41861),r=a(2535),n=a(23340),l=a(86070);const o=({images:e,breakpoint:t,type:a,name:o})=>{const c=(0,n._)(),u=t===s.e.SMALL?r.Qe.SIZE_64:r.Qe.SIZE_112;return(0,l.jsx)(i.b,{fadeIn:!0,images:c(e,r.BZ[u]),shape:i.u.ROUNDED_CORNERS,size:u,iconSize:t===s.e.SMALL?"medium":"xlarge",type:a,title:o,loadingMode:"eager"})}},97267:(e,t,a)=>{a.d(t,{U:()=>n});var s=a(65583),i=a(98455),r=a(86070);const n=({children:e})=>(0,r.jsx)(s.d,{lineClamp:2,as:"div",dir:"auto",className:i.A.title,children:e})},22590:(e,t,a)=>{a.d(t,{M:()=>c});var s=a(21743),i=a(30758);const r=[],n=(e,t)=>{const a=[];let s=e,i=t;for(;s>0;){const t=Math.ceil(s/i);a.push({first:e-s,nrItems:t}),s-=t,i--}return a};var l=a(86070);const o=e=>{const{itemsInNode:t,renderItem:a,renderPlaceholder:i,estimatedHeight:r,scrollNodeRef:c,nrRowsOverscan:u=10,nrInitialInView:d=0,firstIndex:m,heights:p,fanOut:x=2}=e,{ref:h,inView:g,entry:y}=(0,s.Wx)({root:c.current,rootMargin:u*r+"px 0px",initialInView:m<d}),f=`${m}-${t}`;p[f]??=r*t,y?.boundingClientRect?.height&&(p[f]=y.boundingClientRect.height);const b=p[f];return 0===t?null:g?1===t?(0,l.jsx)("div",{ref:h,role:"presentation",children:a(m,b)}):(0,l.jsx)("div",{ref:h,role:"presentation",children:n(t,x).map((({first:t,nrItems:a},s)=>(0,l.jsx)(o,{...e,itemsInNode:a,firstIndex:m+t},s)))}):(0,l.jsx)("div",{ref:h,role:"presentation",children:i(`${b}px`)})},c=e=>{const t=(e=>{const t=r.find((t=>t.key===e))?.heights||{},a=(0,i.useCallback)((t=>{if(!e)return;const a=r.findIndex((t=>t.key===e));-1===a?r.push({key:e,heights:t}):(r[a].heights=t,r.push(r.splice(a,1)[0])),r.length>10&&r.shift()}),[e]),s=(0,i.useRef)({...t});return(0,i.useEffect)((()=>()=>{a(s.current)}),[a]),s.current})(e.persistanceKey);return(0,l.jsx)(o,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView})}},32350:(e,t,a)=>{a.d(t,{Nz:()=>l,Vp:()=>r,Vv:()=>o,wD:()=>c,xz:()=>n});var s=a(67674),i=a(32165);const r=[s.fl.TRACKS,s.fl.LOCAL_TRACKS,s.fl.ALBUMS,s.fl.ARTISTS,s.fl.PLAYLISTS,s.fl.PLAYLISTS_V2,s.fl.FOLDERS,s.fl.EPISODES,s.fl.CHAPTERS,s.fl.SHOWS,s.fl.AUDIOBOOKS,s.fl.PSEUDO_PLAYLISTS],n={[s.fl.TRACKS]:"tracks",[s.fl.ALBUMS]:"albums",[s.fl.ARTISTS]:"artists",[s.fl.PLAYLISTS]:"playlists",[s.fl.FOLDERS]:"folders",[s.fl.SHOWS]:"shows",[s.fl.EPISODES]:"episodes",[s.fl.CHAPTERS]:"chapters",[s.fl.LOCAL_TRACKS]:"local-tracks",[s.fl.AUDIOBOOKS]:"audiobooks",[s.fl.PSEUDO_PLAYLISTS]:"pseudo-playlists"};let l=function(e){return e.ON="on",e.BEFORE="before",e.AFTER="after",e}({});const o=(0,i.g)(l);function c(e){return r.includes(e)}},47755:(e,t,a)=>{a.d(t,{A:()=>g});var s=a(30758),i=a(88308),r=a(67674),n=a(32350);function l(e,t,a,s){if(e.defaultPrevented)return null;const i=t.includes(n.Nz.BEFORE),r=t.includes(n.Nz.AFTER);let l=n.Nz.ON;if(e.currentTarget instanceof HTMLElement&&(i||r)){const{top:r,height:o,left:c,width:u,right:d}=e.currentTarget.getBoundingClientRect(),m=t.includes(n.Nz.ON);if("horizontal"===a)if(m&&i){(s?e.clientX>Math.round(d)-u/4:e.clientX<Math.round(c)+u/4)&&(l=n.Nz.BEFORE)}else{l=(s?e.clientX>Math.round(d)-u/2:e.clientX<Math.round(c)+u/2)?n.Nz.BEFORE:n.Nz.AFTER}else"vertical"===a&&(m&&i?e.clientY<Math.round(r)+o/4&&(l=n.Nz.BEFORE):l=e.clientY<Math.round(r)+o/2?n.Nz.BEFORE:n.Nz.AFTER)}return t.includes(l)?l:null}var o=a(75627);function c(e,t){return Array.from(e.dataTransfer?.types??[]).filter(r._4).filter((e=>!!(0,n.wD)(e)&&t.includes(e))).filter(n.wD)}var u=a(10058);function d(e,t,a){const s=c(e,t);if(!s.length)return function(e,t){return e.split(/[\s,;]+/g).map((e=>(0,o.o_h)(e?.trim()))).filter(u.P).reduce(((e,a)=>{const s=r.Ay[a.type];return(0,n.wD)(s)&&t.includes(s)?(e[s]||=[],e[s].push(a.toURI()),e):e}),{})}(e.dataTransfer?.getData("text/plain"),t);const i=Object.fromEntries(s.map((t=>[t,e.dataTransfer?.getData(t)?.split("\n").filter(Boolean)??[]])));if(a){const{[r.fl.PLAYLISTS]:e,...t}=i,a=Array.from(new Set([...i[r.fl.PLAYLISTS_V2]??[],...(i[r.fl.PLAYLISTS]??[]).map(m)]));return{...t,...a.length?{[r.fl.PLAYLISTS_V2]:a}:null}}return i}function m(e){const t=(0,o.o_h)(e);return t?.type===o.NQG.PLAYLIST?(0,o.Pse)(t.id).toURI():e}var p=a(29602),x=a(28833);const h={droppableMimeTypes:"albums artists episodes chapters folders playlists shows tracks local-tracks audiobooks pseudo-playlists",useDropTarget:"main-useDropTarget-base","useDropTarget--albums":"main-useDropTarget-album","useDropTarget--artists":"main-useDropTarget-artist","useDropTarget--episodes":"main-useDropTarget-episode","useDropTarget--chapters":"OxrHhBsQAggwnv6RmqRy","useDropTarget--folders":"main-useDropTarget-folder","useDropTarget--playlists":"main-useDropTarget-playlist","useDropTarget--shows":"main-useDropTarget-show","useDropTarget--tracks":"main-useDropTarget-track","useDropTarget--local-tracks":"main-useDropTarget-local","useDropTarget--audiobooks":"main-useDropTarget-audiobook","useDropTarget--pseudo-playlists":"main-useDropTarget-pseudoPlaylist"};function g({uri:e,id:t=e,allowedMimeTypesByDropPosition:a,onDrop:o,onLongDragOver:u,longDragOverTimeout:m=1e3,reorderDirection:g="vertical"}){const f=(0,i.lB)((()=>a),[a]),b=(0,x.W)(),A=(0,p.wK)(),R=!!t&&1===A.length&&A[0]===t,T=Object.values(f).every((e=>e.includes(r.fl.PLAYLISTS_V2)&&!e.includes(r.fl.PLAYLISTS))),[j,v]=(0,s.useState)(null),C=(0,s.useCallback)((e=>R?[]:Object.entries(f).filter((([t,a])=>c(e,a).length>0)).map((([e])=>e)).filter(n.Vv)),[R,f]),k=(0,s.useRef)(!0),S=(0,s.useRef)(null),E=(0,s.useRef)(o);E.current=o;const I=(0,s.useRef)(u);I.current=u;const L=(0,s.useCallback)((()=>{k.current=!0,v(null),S.current&&(window.clearTimeout(S.current),S.current=null)}),[]);(0,s.useEffect)((()=>L),[L]);const N=(0,s.useCallback)((e=>{const t=C(e);t.length&&(v(l(e,t,g,b)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=t.includes(n.Nz.ON)?"copy":"move"),e.preventDefault())}),[C,b,g]),w=(0,s.useCallback)((e=>{if(C(e).length&&!e.defaultPrevented){if(k.current){k.current=!1;const t=e.currentTarget,a=()=>{document.contains(t)||(L(),document.removeEventListener("dragenter",a))};document.addEventListener("dragenter",a),document.addEventListener("dragend",(()=>{document.removeEventListener("dragenter",a),L()}),{once:!0}),I.current&&(S.current=window.setTimeout((()=>{I.current?.()}),m))}e.preventDefault()}}),[C,m,L]),P=(0,s.useCallback)((e=>{C(e).length&&(function(e){return null===e.relatedTarget&&y?!document.elementsFromPoint(e.clientX,e.clientY).includes(e.currentTarget):!e.currentTarget.contains(e.relatedTarget instanceof Node?e.relatedTarget:null)}(e)&&L(),e.preventDefault())}),[C,L]),U=(0,s.useCallback)((e=>{const t=l(e,C(e),g,b);if(!e.defaultPrevented&&t){const a=d(e,f[t]??[],T),s=function(e){return{sectionId:parseInt(e.dataTransfer.getData("text/x-spotify-section"),10)||0,contextUri:e.dataTransfer.getData("text/x-spotify-context"),itemIds:e.dataTransfer.getData(r.fl.UIDS)?.split("\n").filter(Boolean)??[]}}(e);Object.keys(a).length&&E.current&&(E.current(a,t,s),e.preventDefault())}L()}),[C,g,b,L,f,T]),D=(0,s.useMemo)((()=>`${h.useDropTarget} ${Array.from(new Set(Object.values(f).flat()))?.map((e=>h[`useDropTarget--${n.xz[e]}`]??"")).join(" ")}`),[f]);return(0,s.useMemo)((()=>({dropPosition:j,className:D,onDragEnter:w,onDragLeave:P,onDragOver:N,onDrop:U})),[D,j,w,P,N,U])}const y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},16657:(e,t,a)=>{a.d(t,{u:()=>s});let s=function(e){return e.TITLE="title",e.SUBTITLE="subTitle",e}({})},98643:(e,t,a)=>{a.d(t,{$:()=>n,e:()=>r});var s=a(90861),i=a(90089);const r={SMALL:"small",LARGE:"large"},n=()=>(0,i.y)()===s.E.SMALL?"small":"large"},60292:(e,t,a)=>{a.r(t),a.d(t,{ThisIsTourCard:()=>d,default:()=>d,useThisisPlaylistExtensionQuery:()=>h});var s=a(6128),i=a(29004),r=a(64721),n=a(55285),l=a(11716),o=a(33058),c=a(28689),u=a(86070);const d=e=>{const{artistImageUrl:t,artistName:a,artistConcertsUri:d,spec:m}=e,p=(0,l.s)(),x=(0,o.t)(m.concertsCardFactory({identifier:a,uri:d,reason:"This is On Tour phase 1 MVP"}));return t&&a&&d?(0,u.jsxs)("section",{ref:x,className:"contentSpacing",children:[(0,u.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:r.Ru.get("concerts")}),(0,u.jsx)("div",{className:c.A.cards,children:(0,u.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,u.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,u.jsxs)("div",{className:c.A.cardContent,children:[(0,u.jsx)(s.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:r.Ru.get("concerts_on_tour")}),(0,u.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:a}),(0,u.jsx)(n.N,{to:d,className:c.A.cardLink,children:(0,u.jsx)(i.n,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:d,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:d});p.logInteraction(e)},className:c.A.cardButton,children:r.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(86565),p=a(50684);const x=new m.l("thisisPlaylistExtension","query","906c2e14927400c8a71645c647576ce032f837a112d5e6f9375b19c80445c8cf",null),h=(e,t)=>(0,p.I)(x,e,t)},75021:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ki});var s=a(30758),i=a(95440),r=a(1978),n=a(6128),l=a(63166),o=a(87542),c=a(75627),u=a(64721),d=a(14576),m=a(47010),p=a(86070);const x=(e,t,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(a),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),h=({clickTracking:e,clickThrough:t,thirdPartyImpression:a,impression:r,logoUrl:l,advertiserName:o,creativeId:c,lineItemId:d})=>{const h=(0,i.wA)(),[g,y]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(h((0,m.tb)()),h((0,m.i2)(x("event_viewed",c,d))),()=>{h((0,m.zV)())})),[h,c,d]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(n.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:u.Ru.get("playlist.presented_by",o)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{h((0,m.i2)(x("event_clicked",c,d))),y(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:l,alt:o,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),a&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),g&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},g=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,s.useEffect)((()=>{a||t((0,m.uP)(e))}),[t,e,a]),a?(0,p.jsx)("div",{children:(0,p.jsx)(h,{...a})}):null},y=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,i.d4)((e=>e.ads.sponsoredPlaylist.previewAd));(0,s.useEffect)((()=>{a||t((0,m.uU)())}),[t,a]);const n=r||a&&((e,t)=>{const a=Date.now()/1e3,s=e.split(":"),i=s[s.length-1];return t.some((({playlistId:e,endTime:t,startTime:s})=>e===i&&a>=s&&a<(t||a+1)))})(e,a);return n?(0,p.jsx)(g,{playlistUri:e}):null};var f=a(67674),b=a(32350),A=a(47755),R=a(18212),T=a(1195),j=a(41935),v=a(56705),C=a(70295),k=a(23541),S=a(9498),E=a(86399),I=a(78358),L=a(66207),N=a(32356),w=a(19703),P=a(60292),U=a(72277),D=a(23475),M=a(65234),O=a(1620);var _=a(41089),B=a(27796),F=a(87123),z=a(86565),$=a(50684);const V=new z.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),W=new z.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),H=new z.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),q=new z.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var K=a(24902),Y=a(9086),Q=a(99916);function G(e){return{type:K.c.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(u.Ru.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,Y.e$)(e.accessInfo),isExplicit:e.contentRating?.label===Q.x7.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var J=a(19434),X=a(32086),Z=a(84744),ee=a(10058),te=a(85690);function ae(e){return{type:K.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Z.r)(e.coverArt)}}function se(e){if("Album"!==e.data.__typename)return null;return ae(e.data)}function ie(e){const t=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(t??[]).map((e=>se(e))).filter(ee.P)||[]}function re(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:K.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,Z.r)(t.visuals.avatarImage)}}function ne(e){if("Episode"!==e.data.__typename)return null;const t=e.data,a=t.podcastV2.data;return"Podcast"!==a.__typename?null:{type:K.c.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,Z.r)(t.coverArt),isExplicit:t.contentRating?.label===J.x7.Explicit,is19PlusOnly:t.contentRating?.label===J.x7.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:t.playability.playable}}function le(e){const t=(0,Z.r)(e.albumOfTrack?.coverArt||null);return{type:K.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===J.x7.Explicit,is19PlusOnly:e.contentRating?.label===J.x7.NineteenPlus}}function oe(e){if("Track"!==e.data.__typename)return null;return le(e.data)}function ce(e){return(e?.itemsV2??[]).map((e=>{const t=(0,X.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return se(t);case"ArtistResponseWrapper":return re(t);case"EpisodeResponseWrapper":return ne(t);case"TrackResponseWrapper":return oe(t);default:return(0,te.k)(t),null}})).filter(ee.P)||[]}function ue(e){return(e?.itemsV2??[]).map((e=>{const t=(0,X.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?G(t.data):null})).filter(ee.P)||[]}const de=async(e,t,a,s=0,i=10,r=10)=>{const n={term:t,offset:s,limit:i,numberOfTopResults:r};if(a){const a=await e(W,n),s=a?.data?.searchV2;return s?(l=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:ue(s.topResultsV2)??[],query:l}):null}var l;const o=await e(V,n),c=o?.data?.searchV2;return c?function(e,t){return{albums:ie(e.albumsV2)??[],artists:(i=e.artists,((i?.items??[]).map((e=>re(e))).filter(ee.P)||[])??[]),episodes:(s=e.episodes,((s?.items??[]).map((e=>ne(e))).filter(ee.P)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>oe(e.item))).filter(ee.P)||[])??[]),topResults:ce(e.topResultsV2)??[],query:t};var a,s,i}(c,t):null},me=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(H,i),n=r?.data?.albums;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>le(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,te.k)(t),null}}(n):null},pe=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(q,i),n=r?.data?.artists;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>ae(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>le(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,te.k)(t),null}}(n):null};let xe=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const he=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:xe.SEARCH,term:t.term,title:""}]}),e);var ge=a(97500),ye=a.n(ge),fe=a(40638),be=a(87589);const Ae="playlist-inlineSearchBox-filterInputContainer",Re="playlist-inlineSearchBox-filterInput",Te="playlist-inlineSearchBox-overlay",je="playlist-inlineSearchBox-searchIconContainer",ve="playlist-inlineSearchBox-searchIcon",Ce="playlist-inlineSearchBox-clearButton",ke=s.memo((function({placeholder:e,onChange:t=(()=>{}),onFocus:a=(()=>{})}){const[i,r]=(0,s.useState)(""),l=(0,s.useRef)(null),o=(0,fe.YQ)((e=>{t(e)}),200),c=(0,s.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),d=(0,s.useCallback)((()=>{l.current&&l.current.focus(),r(""),t("")}),[r,t]),m=(0,s.useCallback)((e=>{"Escape"===e.key&&i&&d()}),[i,d]);return(0,p.jsxs)("div",{className:Ae,role:"search",children:[(0,p.jsx)(n.E,{as:"input",variant:"bodySmall",ref:l,className:ye()(Re),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:m,onFocus:a,value:i}),(0,p.jsxs)("div",{className:Te,children:[(0,p.jsx)("span",{className:je,children:(0,p.jsx)(be.C,{size:"small",className:ve,"aria-hidden":"true"})}),i&&(0,p.jsx)("button",{className:Ce,onClick:d,"aria-label":u.Ru.get("search.a11y.clear-input"),children:(0,p.jsx)(_.M,{size:"small"})})]})]})}));var Se=a(96664),Ee=a(29004),Ie=a(91825),Le=a(45129),Ne=a(50901),we=a(66810),Pe=a(52633),Ue=a(49740),De=a(8541),Me=a(44979),Oe=a(13377),_e=a(93336),Be=a(21426),Fe=a(88826),ze=a(37199),$e=a(22073),Ve=a(42664),We=a(99101),He=a(97267),qe=a(16657),Ke=a(98643),Ye=a(55285),Qe=a(25336),Ge=a(71502),Je=a(49066),Xe=a(73927),Ze=a(22727),et=a(56106),tt=a(88417),at=a(18614),st=a(14471),it=a(11716),rt=a(37659),nt=a(98455);const lt="i3wVxndfxMEqUujUJOYc",ot="XFwXZEToljeXDRWQYSEm",ct="hZ_wTiRO870PNY1cRKCd",ut=(0,s.memo)((function({book:e,contextUri:t,featureIdentifier:a,index:i,sharingInfo:l,uid:o,rating:d,isRecommendation:m=!1,canRemove:x=!1,showSeparator:h=!1,highlightText:g=(e=>e),...y}){const{name:f,description:b,isLocked:A,isExplicit:R,images:T,type:j,uri:v,authorName:C,consumptionCapExplanation:k,durationMs:S,topics:E=[],signifierText:I}=e,L=(0,it.s)(),{spec:N}=(0,O.r)(Ne.m,{data:{position:i,uri:v}}),{isPlaying:w,isActive:P,togglePlay:U}=(0,tt.P)({uri:v},{featureIdentifier:a}),D=(0,r.Zp)(),M=(0,c.o_h)(v).toURLPath(!0),{addItems:_}=(0,at.x)(t),B=(0,Ke.$)(),F=(0,st.p)(v),[z,$]=(0,Je.A)(v),V=(0,Ze.T)(v),W=B===Ke.e.SMALL?"small":"medium",H=(0,s.useCallback)((()=>{L.logInteraction(N.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:v})),_([v],{after:"end"})}),[L,N,t,v,_]),q=(0,s.useCallback)((()=>{if(A&&!k)D(M);else{const e=(0,Qe.$I)({isPlaying:w,isActive:P,spec:N.playButtonFactory(),logger:L,uri:v});U({loggingParams:e})}}),[k,P,A,w,L,D,N,U,v,M]),K=(0,s.useCallback)((()=>{L.logInteraction(N.genreLinkFactory({uri:E[0].uri??""}).hitUiNavigate({destination:E[0].uri??""}))}),[L,N,E]),Y=(0,p.jsx)(He.U,{children:g(f,qe.u.TITLE)}),G=(0,p.jsx)($e.k,{description:b,children:(0,p.jsxs)(Be.X,{badges:!!R&&(0,p.jsx)(Ge.U,{}),children:[!0===d?.showAverage&&void 0!==d.average&&(0,p.jsxs)("span",{children:[(0,p.jsx)(Se.j,{size:"xsmall",className:lt}),u.Ru.formatNumber(d.average,{maximumFractionDigits:1})]}),E.at(0)?.title&&(0,p.jsx)(Ye.N,{className:ot,to:E[0].uri??"",onClick:K,children:E[0].title}),void 0!==S&&(0,p.jsx)(rt.j,{isPlaying:!1,fullyPlayed:F?.state===Q.H7.Completed,durationMs:S,position:F?.playPositionMilliseconds})]})}),J=(0,p.jsx)(_e.p,{uri:v,uid:o,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:x}),X=!A&&!!!k,Z=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(we.M,{className:ye()({[nt.A.visibleAction]:z}),isAdded:z,onClick:()=>{z?L.logInteraction(N.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:v})):L.logInteraction(N.saveToLibraryButtonFactory().hitLike({itemToBeLiked:v})),$(!z)},size:W,isAudiobook:!0,condensedAll:!0,condensed:!0}),(0,p.jsx)(Pe.I,{className:ye()({[nt.A.visibleAction]:(0,Xe.X)(V)}),uri:v,onClick:(e,t)=>{t===et.NV.ADD&&L.logInteraction(N.downloadButtonFactory().hitDownload({itemToDownload:v}))},size:W,canDownload:X,condensedAll:!0}),(0,p.jsx)(De.w,{uri:v,sharingInfo:l??null,interactionData:{intent:"share",type:"click"},size:W,onClick:()=>{L.logInteraction(N.shareButtonFactory().hitShare({entityToBeShared:v,shareId:l?.shareId??""}))},condensedAll:!0}),(0,p.jsx)(Me.b,{menu:J,children:(0,p.jsx)(Ue.e,{label:u.Ru.get("more.label.context",f),size:W,onClick:()=>{L.logInteraction(N.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),ee=m?null:(0,p.jsx)(Ve.F,{actions:Z,playButton:(0,p.jsx)(Fe.q,{onClick:q,isPlaying:w,ariaPlayLabel:u.Ru.get("tracklist.a11y.play",f,C),ariaPauseLabel:u.Ru.get("tracklist.a11y.pause",f,C),locked:A})}),te=(0,p.jsx)(We.e,{images:T,name:f,type:j,breakpoint:B}),ae=I?(0,p.jsx)(n.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:I}):null,se=m?(0,p.jsx)(Ee.n,{size:"small",onClick:H,children:u.Ru.get("playlist.extender.button.add")}):null,ie=(0,p.jsxs)(Ie.j,{hasTextSeparator:!0,children:[(0,p.jsxs)(p.Fragment,{children:[m&&A&&(0,p.jsx)(Le.u,{semanticColor:"textSubdued",title:u.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:ct}),u.Ru.get("card.tag.audiobook")]}),g(C,qe.u.SUBTITLE)]});return(0,p.jsx)(Oe.h,{menu:J,onShow:()=>{L.logInteraction(N.secondaryHitUiReveal())},children:(0,p.jsx)(ze.k,{breakpoint:B,id:`book-${v}`,media:te,pretitle:ae,title:Y,body:G,subtitle:ie,footer:ee,trailing:se,isActive:P,onClick:()=>{L.logInteraction(N.hitUiNavigate({destination:v})),D(M)},showSeparator:h,...y})})}));var dt=a(7588),mt=a(98486),pt=a(89865);const xt=({renderRow:e,searchResults:t})=>(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:dt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADD]});var ht=a(37481);const gt=({renderRow:e,searchResults:t})=>{const a=t.filter((e=>e.type===K.c.TRACK)),s=t.filter((e=>e.type===K.c.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:ht.A.artistResultListTitle,children:u.Ru.get("playlist.curation.popular_songs")}),(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:dt.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADD]}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:ht.A.artistResultListTitle,children:u.Ru.get("playlist.curation.albums")}),(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:dt.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADD]})]})},yt=({renderRow:e,searchResults:t,renderSeeAllRow:a,seeAllXList:s})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:dt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("search.title.all"),renderRow:a,rowPlaceholder:dt.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADD],testID:"playlist-inline-curation-see-all-options"})]}),ft=({renderRow:e,searchResults:t})=>(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:dt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADD]}),bt=({renderRow:e,searchResults:t})=>(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:dt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADD]}),At=({renderRow:e,searchResults:t})=>(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:dt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADD]});var Rt=a(60858),Tt=a(10088);const jt="G2t3w2AAeb5OXp0_GeWs",vt="saVjTFMyWYUz975_tkQm",Ct="thi8fNCkEhutRkDC90c0",kt="pHVlkChuJpEnBQyU3ADv",St="ENWs3JxcqtD98_8fbPz2",Et="L8IUKEJL6JiTyE_qUVCc",It="XcyjdXgsNX0DBt72tfiD",Lt="VhJnuS7UcUPfIlzD8dlU",Nt="He29vQ5anFj_bJ5iEaI2",wt=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Tt.$,{className:St,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${u.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:Nt,onClick:s,children:[(0,p.jsxs)(Rt.T,{columnIndex:0,className:Et,children:[void 0!==i?(0,p.jsx)("img",{className:Ct,src:i,alt:e.name}):null,(0,p.jsxs)("div",{className:It,children:[(0,p.jsx)(n.E,{as:"p",className:kt,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:u.Ru.get("album")})]})]}),(0,p.jsx)(Rt.T,{columnIndex:1}),(0,p.jsx)(Rt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Lt,onClick:s,children:a?(0,p.jsx)(F.g,{}):(0,p.jsx)(B.V,{})})})]})})};var Pt=a(10796);const Ut=({size:e})=>(0,p.jsx)("div",{className:vt,children:(0,p.jsx)(Pt.r,{size:e})}),Dt=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Tt.$,{className:St,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${u.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:Nt,onClick:s,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(Rt.T,{columnIndex:0,className:Et,children:[void 0!==i?(0,p.jsx)("img",{className:jt,src:i,alt:e.name}):(0,p.jsx)(Ut,{size:"small"}),(0,p.jsxs)("div",{className:It,children:[(0,p.jsx)(n.E,{as:"p",className:kt,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:u.Ru.get("artist")})]})]}),(0,p.jsx)(Rt.T,{columnIndex:1}),(0,p.jsx)(Rt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Lt,onClick:s,children:a?(0,p.jsx)(F.g,{}):(0,p.jsx)(B.V,{})})})]})})};var Mt=a(48732),Ot=a(33896),_t=a(15904),Bt=a(55880),Ft=a(67230),zt=a(70540),$t=a(37588),Vt=a(87432),Wt=a(6478),Ht=a(62355),qt=a(89494),Kt=a(46832),Yt=a(57782),Qt=a(91616),Gt=a(95309),Jt=a(30057),Xt=a(30113);const Zt=s.memo((function({uid:e,uri:t,isPlayable:a,isMOGEFRestricted:i,isExplicit:r,contextUri:n,name:l,imgUrl:o,index:c,podcast:d,usePlayContextItem:m}){const x=(0,s.useMemo)((()=>n.replace("internal:recs:","")),[n]),h=(0,qt.W)(),{addItems:g}=(0,at.x)(x),{isActive:y,isPlaying:f,triggerPlay:b,togglePlay:A}=m({uid:e,uri:t,index:c}),R=(0,s.useCallback)((()=>{g([t],{after:"end"}),h({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:x})}),[g,t,h,x]),T=(0,Ze.T)(t),{isPlayable:j,isAnyArtistBanned:v}=(0,Kt.g)(t,{isPlayable:a}),{badges:C,hasBadges:k}=(0,Jt.b)({downloadAvailability:T,isExplicit:r,isMOGEFRestricted:i});return(0,p.jsx)(Gt.pZ,{value:"row",index:c,children:(0,p.jsx)(Oe.h,{menu:(0,p.jsx)(Mt.b,{uri:t,contextUri:n}),children:(0,p.jsxs)(Ht.w,{uri:t,contextUri:t,isPlayable:j,isAnyArtistBanned:v,onTriggerPlay:()=>{b()},isActive:y,ageRestricted:i,index:c,ariaRowIndex:c,dragMetadata:{name:l,createdBy:d.name},children:[(0,p.jsxs)($t.U,{ariaColIndex:0,children:[(0,p.jsx)(Bt.u,{uri:t,src:o,onClick:()=>{A()},isLocked:!1,isPlaying:f,isActive:y,isEpisode:!0,playAriaLabel:u.Ru.get("tracklist.a11y.play",l,d.name)}),(0,p.jsxs)(Ft.l,{children:[(0,p.jsx)(Wt.p,{titleText:l,children:l}),k&&(0,p.jsxs)(_t.P,{children:[C.download&&(0,p.jsx)(Yt._,{}),C.explicit&&(0,p.jsx)(Ge.U,{}),C.nineteen&&(0,p.jsx)(Qt.q,{className:Xt.A.nineteen,size:16})]})]})]}),(0,p.jsx)(Vt.o,{ariaColIndex:1,children:(0,p.jsx)(Ot.g,{uri:d.uri,name:d.name,children:d.name})}),(0,p.jsx)(zt.l,{ariaColIndex:2,children:(0,p.jsx)(Ee.n,{size:"small",onClick:R,children:u.Ru.get("playlist.extender.button.add")})})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),ea=({episode:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(Zt,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:s}),ta=({label:e,index:t,isRTL:a,onClick:s})=>(0,p.jsx)(Tt.$,{className:St,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:Nt,onClick:s,children:[(0,p.jsx)(Rt.T,{columnIndex:0,className:Et,children:(0,p.jsx)(n.E,{as:"p",className:kt,variant:"bodyMedium",children:e})}),(0,p.jsx)(Rt.T,{columnIndex:1}),(0,p.jsx)(Rt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:Lt,onClick:s,children:a?(0,p.jsx)(F.g,{}):(0,p.jsx)(B.V,{})})})]})});var aa=a(50507),sa=a(17221),ia=a(12830),ra=a(67844),na=a(4696),la=a(43024),oa=a(45898),ca=a(59975),ua=a(1817);const da=s.memo((function({uid:e,uri:t,name:a,imgUrl:i,artists:r,isExplicit:n,index:l,album:o,contextUri:c,isPlayable:d,isMOGEFRestricted:m,usePlayContextItem:x,durationMs:h,shouldRenderDuration:g,internalLink:y}){const{spec:f,logger:b}=(0,O.r)(aa.i,{data:{position:l,reason:"",uri:t}}),A=(0,s.useMemo)((()=>c.replace("internal:recs:","")),[c]),R=(0,qt.W)(),{addItems:T}=(0,at.x)(A),{isActive:j,isPlaying:v,triggerPlay:C,togglePlay:k}=x({uid:e,uri:t,index:l}),S=(0,s.useCallback)((()=>{b.logInteraction(f.addButtonFactory().hitAddToPlaylist({playlist:A,itemToBeAdded:t})),T([t],{after:"end"}),R({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:A})}),[b,f,A,t,T,R]),E=(0,Ze.T)(t),{isPlayable:I,isAnyArtistBanned:L}=(0,Kt.g)(t,{isPlayable:d,isLocal:!1,isOutOfMarket:!1,artistUris:r?.map((e=>e.uri))}),{unBanArtists:N}=(0,ca.M)(r.map((e=>e.uri))),w=r.map((e=>e.name)).join(u.Ru.getSeparator()),{badges:P,hasBadges:U}=(0,Jt.b)({downloadAvailability:E,isExplicit:n,isMOGEFRestricted:m}),D=g&&h,M=r.map((e=>e.name)).join(u.Ru.getSeparator()),_=(0,ua.c)();return(0,p.jsx)(Gt.pZ,{value:"row",index:l,children:(0,p.jsx)(Oe.h,{menu:(0,p.jsx)(sa.P,{uri:t,albumUri:o.uri,artists:r,contextUri:c}),children:(0,p.jsxs)(Ht.w,{uri:t,contextUri:c,isPlayable:I,isAnyArtistBanned:L,handleArtistBanUndoClick:N,onTriggerPlay:(e,t)=>{C({loggingParams:t})},isActive:j,ageRestricted:m,index:l,ariaRowIndex:l,dragMetadata:{name:a,createdBy:w},spec:f,className:Xt.A.isRecommendedTrackListRow,children:[(0,p.jsxs)($t.U,{ariaColIndex:0,children:[(0,p.jsx)(Bt.u,{uri:t,src:i,onClick:(e,t)=>{k({loggingParams:t})},isLocked:!1,isPlaying:v,isActive:j,playAriaLabel:u.Ru.get("tracklist.a11y.play",a,w),spec:f}),(0,p.jsxs)(Ft.l,{children:[y&&_?(0,p.jsx)(Ye.N,{to:t,className:Xt.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(Wt.p,{titleText:a,children:a})}):(0,p.jsx)(Wt.p,{titleText:a,children:a}),U&&(0,p.jsxs)(_t.P,{children:[P.explicit&&(0,p.jsx)(Ge.U,{}),P.download&&(0,p.jsx)(Yt._,{}),P.nineteen&&(0,p.jsx)(Qt.q,{className:Xt.A.nineteen,size:16})]}),(0,p.jsx)(la.p,{children:(0,p.jsx)(ia.l,{artists:r,spec:f})})]})]}),(0,p.jsx)(Vt.o,{ariaColIndex:1,children:(0,p.jsx)(Ot.g,{uri:o.uri,name:o.name,creatorUri:r?.[0]?.uri,spec:f,children:o.name})}),(0,p.jsx)(Vt.o,{ariaColIndex:2,children:(0,p.jsx)("span",{})}),(0,p.jsxs)(zt.l,{ariaColIndex:3,children:[D?(0,p.jsx)(oa.d,{uri:t}):null,D?(0,p.jsx)(ra.P,{duration:h,dataTestId:"render-duration"}):(0,p.jsx)(Ee.n,{size:"small",onClick:S,"aria-label":u.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:u.Ru.get("playlist.extender.button.add")}),D?(0,p.jsx)(na.Y,{menu:(0,p.jsx)(sa.P,{uri:t,albumUri:o.uri,contextUri:c,artists:r}),label:u.Ru.get("more.label.track",a,M)}):null]})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),ma=({track:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(da,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:s});var pa=a(92057);const xa=({resultList:e,level:t,isRTL:a,playlistUri:i,navToResults:r,navToEntity:l,term:o,isBooklist:d})=>{let m=e;const x=(e=>e.map((e=>{if(e.type===K.c.TRACK||e.type===K.c.EPISODE){const{uri:t,id:a}=e;return{type:(0,c.U_m)(t)?K.c.TRACK:K.c.EPISODE,uri:t,uid:a,provider:null}}return null})).filter(ee.P))(e),{draggable:h,onDragStart:g}=(0,pa.P)(),{usePlayContextItem:y}=(0,tt.P)({uri:`${i.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${t?.navType??0}`,pages:[{items:x}]},{featureIdentifier:"search"}),b=(0,s.useCallback)(((e,t)=>(0,p.jsx)(ta,{isRTL:a,index:t,label:e.label,onClick:()=>{r({navType:e.type,term:o,title:e.label})}},e.uri)),[a,r,o]),A=(0,s.useCallback)(((e,t)=>e.type===K.c.ARTIST?(0,p.jsx)(Dt,{isRTL:a,index:t,searchResult:e,onClick:()=>{l({navType:xe.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===K.c.EPISODE?(0,p.jsx)(ea,{index:t,episode:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===K.c.TRACK?(0,p.jsx)(ma,{index:t,track:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===K.c.ALBUM?(0,p.jsx)(wt,{index:t,isRTL:a,searchResult:e,onClick:()=>{l({navType:xe.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(ut,{book:e,index:t,featureIdentifier:"playlist_recommendations",contextUri:i,isRecommendation:!0,showSeparator:0!==t},e.uri)),[a,l,i,y]);if(""===o)return(0,p.jsx)("div",{className:ht.A.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:ht.A.emptyStateContainer,children:[(0,p.jsx)(n.E,{as:"h1",variant:"titleSmall",children:u.Ru.get("search.empty-results-title",o)}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:u.Ru.get("search.empty-results-text")})]});if(t?.navType===xe.SEARCH){const t=[{type:xe.ARTISTRESULTS,label:u.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:xe.ALBUMRESULTS,label:u.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:xe.TRACKRESULTS,label:u.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,d?(0,p.jsx)(p.Fragment,{children:m.map(((e,t)=>e&&e.type===K.c.AUDIOBOOK?(0,p.jsx)(ut,{contextUri:i,index:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:h,onDragStart:t=>{g(t,{itemUris:[e.uri],itemMimeTypes:[f.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(yt,{renderRow:A,searchResults:m,renderSeeAllRow:b,seeAllXList:t})}return t?.navType===xe.ALBUM?(0,p.jsx)(xt,{renderRow:A,searchResults:m}):t?.navType===xe.ARTIST?(0,p.jsx)(gt,{renderRow:A,searchResults:m}):t?.navType===xe.ALBUMRESULTS?(0,p.jsx)(ft,{renderRow:A,searchResults:m}):t?.navType===xe.TRACKRESULTS?(0,p.jsx)(At,{renderRow:A,searchResults:m}):t?.navType===xe.ARTISTRESULTS?(0,p.jsx)(bt,{renderRow:A,searchResults:m}):null};var ha=a(28833),ga=a(48125);const ya=({playlistUri:e,hideInlineCuration:t,isBooklist:a})=>{const[i,r]=(0,s.useState)([]),[l,o]=(0,s.useState)(),c=(0,ha.W)(),{level:d,changeTerm:m,goBack:x,navToEntity:h,navToResults:g,term:y}=(()=>{const[e,t]=(0,s.useReducer)(he,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:f}=(0,s.useContext)(ga.j),{spec:b,logger:A,UBIFragment:R}=(0,O.r)(D.e,{}),T=(0,s.useCallback)((e=>{m(e),e?A.logInteraction(b.searchBarFactory().keyStrokeFilter()):A.logInteraction(b.searchBarFactory().hitClearFilter())}),[m,A,b]);return(0,s.useEffect)((()=>{let e=!0;return(async()=>{if(d)switch(d.navType){case xe.SEARCH:try{if(!l||l.query!==y&&""!==y){const t=await de(f,y,a);e&&o(t)}else""===y&&r([])}catch{r([])}l&&r(l.topResults);break;case xe.ARTISTRESULTS:l&&r(l?.artists);break;case xe.ALBUMRESULTS:l&&r(l?.albums);break;case xe.TRACKRESULTS:l&&r(l?.tracks);break;case xe.EPISODERESULTS:l&&r(l?.episodes);break;case xe.ALBUM:try{const t=await me(f,d.uri,100,0);e&&t&&r(t.tracks)}catch{r([])}break;case xe.ARTIST:try{const t=await pe(f,d.uri,100,0);e&&t&&r([...t.albums,...t.tracks])}catch{r([])}}})(),()=>{e=!1}}),[d,y,l,f,a]),(0,p.jsxs)(R,{spec:b,children:[(0,p.jsxs)("section",{className:ht.A.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:ht.A.playlistInlineCurationWrapper,children:[(0,p.jsx)(n.E,{as:"h1",className:ht.A.playlistInlineCurationTitle,variant:"titleSmall",children:u.Ru.get("playlist.curation.title")}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(ke,{placeholder:a?u.Ru.get("playlist.curation.search_placeholder-booklists"):u.Ru.get("playlist.curation.search_placeholder"),onChange:T})})]}),(0,p.jsx)("button",{className:ht.A.playlistInlineCurationCloseButton,onClick:t,children:(0,p.jsx)(_.M,{"aria-label":u.Ru.get("close")})})]}),null!==d&&d.navType!==xe.SEARCH?(0,p.jsxs)("button",{className:ht.A.playlistInlineCurationBackButton,onClick:()=>x(),children:[c?(0,p.jsx)(B.V,{"aria-label":u.Ru.get("navbar.go-back"),className:ht.A.icon}):(0,p.jsx)(F.g,{"aria-label":u.Ru.get("navbar.go-back"),className:ht.A.icon}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",children:d.title})]}):null,(0,p.jsx)("div",{className:ht.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(xa,{playlistUri:e,term:y,level:d,resultList:i,navToEntity:h,navToResults:g,isRTL:c,isBooklist:a})})]})};var fa=a(34002),ba=a(42514),Aa=a(13563);const Ra=(0,s.createContext)({getReference:()=>null,setReference:()=>{}}),Ta=({children:e})=>{const t=(0,s.useRef)(null),a=(0,s.useCallback)((()=>t.current),[]),i=(0,s.useCallback)((e=>{t.current=e}),[]);return(0,p.jsx)(Ra.Provider,{value:{getReference:a,setReference:i},children:e})};var ja=a(43915);const va=(e,t,a)=>{const{name:r,uri:n,uid:l}=e,{sortState:o}=(0,s.useContext)(L.cL),c=o.order!==pt.H.NONE,{draggable:u,onDragStart:m}=(0,pa.P)({itemIds:[l],itemUris:[n],itemMimeTypes:[f.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),{setReference:p,getReference:x}=(0,s.useContext)(Ra),h=(0,s.useCallback)((e=>{p({uri:n,uid:l}),m(e)}),[m,p,l,n]),g=(0,i.wA)(),y=(0,ja.m)(),R=(0,s.useCallback)(((e,a)=>{const s=e[f.fl.AUDIOBOOKS];if(!s)return;const i=x();i?a===b.Nz.BEFORE?y.move(t,[i],{before:{uri:n,uid:l}}):y.move(t,[i],{after:{uri:n,uid:l}}):a===b.Nz.BEFORE?g((0,d.io)(t,s,{before:{uri:n,uid:l}})):g((0,d.io)(t,s,{after:{uri:n,uid:l}})),p(null)}),[t,g,x,y,p,l,n]),T=a&&!c?[f.fl.AUDIOBOOKS]:[];return{...(0,A.A)({uri:n,id:l,allowedMimeTypesByDropPosition:{[b.Nz.BEFORE]:T,[b.Nz.AFTER]:T},onDrop:R}),onDragStart:h,draggable:u}},Ca="bg5inM_sdkHpYWiFf7Id",ka="DyW2LAm9YDcCkcdM0eeP",Sa=()=>(0,p.jsx)("div",{className:ka}),Ea=(0,s.memo)((function({item:e,contextUri:t,canEdit:a=!1,canRemove:s=!1,index:i,highlightText:r}){const{className:n,dropPosition:l,draggable:o,...c}=va(e,t,a);return(0,p.jsxs)(Aa.W,{className:n,"aria-posinset":i,reRunOnDOMUpdate:!0,children:[l===b.Nz.BEFORE&&(0,p.jsx)(Sa,{}),(0,p.jsx)(ut,{book:e,contextUri:t,index:i,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:s,className:n,draggable:o,showSeparator:0!==i,highlightText:r,...c}),l===b.Nz.AFTER&&(0,p.jsx)(Sa,{})]})}));var Ia=a(16274),La=a(22590),Na=a(6056),wa=a(44984),Pa=a(1476);const Ua=({contextUri:e,initialItems:t,nrItems:a,canEdit:i,canRemove:n,ariaLabel:l})=>{const o=(0,ja.m)(),c=(0,M.v7)(),{filter:u}=(0,s.useContext)(I.g),{sortState:d}=(0,s.useContext)(L.cL),{contentsOptions:m}=(0,Ia.$)(d,u),[,x]=(0,N.z1)(),h=(0,s.useCallback)((async(t,a)=>{const s=await o.getContents(e,{...m,offset:t,limit:a}),i=s.items.map((e=>null===e?null:(0,wa.pW)(e)?e:null));return{...s,items:i}}),[o,m,e]),{getItem:g,nrValidItems:y,invalidateCache:f}=(0,Na.E)({nrItems:a,fetch:h,limit:50,initialItems:t});(0,s.useLayoutEffect)((()=>{x(y)}),[y,x]),(0,Pa.H)(e,f);const b=(0,s.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),A=(0,s.useCallback)(((e,t)=>t===qe.u.TITLE||t===qe.u.SUBTITLE?(0,p.jsx)(ba.M,{searchWords:[u],textToHighlight:e}):e),[u]),R=(0,s.useCallback)(((t,a)=>{const s=g(t);return s?(0,p.jsx)(Ea,{contextUri:e,item:s,canEdit:i,canRemove:n,index:t,highlightText:A},s.uri):b(`${a}px`)}),[i,n,e,g,A,b]),T="POP"===(0,r.wQ)()?0:10;return(0,p.jsx)("div",{className:Ca,children:(0,p.jsx)(fa.R,{firstInteractiveIsWrapper:!0,"aria-label":l,"aria-rowcount":y,"aria-colcount":6,children:(0,p.jsx)(Ta,{children:(0,p.jsx)(La.M,{totalCount:y,estimatedHeight:200,renderItem:R,renderPlaceholder:b,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:T})})})})};var Da=a(48586),Ma=a(16163),Oa=a(92441),_a=a(56570),Ba=a(50851);let Fa=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({});const za={[Fa.DOWN]:()=>(0,p.jsx)(Oa.y,{size:"small",className:Xt.A.statusChangeDown}),[Fa.UP]:()=>(0,p.jsx)(_a.J,{size:"small",className:Xt.A.statusChangeUp}),[Fa.NEW]:()=>(0,p.jsx)(Ba.Z,{className:Xt.A.notificationDot}),[Fa.EQUAL]:()=>null},$a=({status:e,number:t})=>{const a=za[e];return(0,p.jsxs)("div",{className:ye()(Xt.A.rowChartStatus),children:[(0,p.jsx)(n.E,{variant:"bodyMedium",children:t}),(0,p.jsx)(a,{})]})};var Va=a(11098),Wa=a(23472),Ha=a(75380),qa=a(45892),Ka=a(47684),Ya=a(42576),Qa=a(46195),Ga=a(13117);const Ja=s.memo((function({uri:e,name:t,duration_ms:a,artists:s,album:i,isMOGEFRestricted:r,isExplicit:n,isPlayable:l,uid:o,index:c,contextUri:d,imgUrl:m,statusChange:x,playCount:h,usePlayContextItem:g,isCompactMode:y}){const{spec:f}=(0,O.r)(aa.i,{data:{position:c,reason:"",uri:e}}),b=(0,Da.w)(),A=(0,ua.c)(),{isActive:R,isPlaying:T,triggerPlay:j,togglePlay:v}=g({uid:o,uri:e,index:c}),C=(0,Ze.T)(e),{isPlayable:k,isAnyArtistBanned:S}=(0,Kt.g)(e,{isPlayable:l,isLocal:!1,isOutOfMarket:!1,artistUris:s?.map((e=>e.uri))}),{unBanArtists:E}=(0,ca.M)(s?.map((e=>e.uri))??[]),{badges:I,hasBadges:L}=(0,Jt.b)({downloadAvailability:C,isExplicit:n,isMOGEFRestricted:r}),N=s?.map((e=>e.name)).join(u.Ru.getSeparator())||"";return(0,p.jsx)(Gt.pZ,{value:"row",index:c,children:(0,p.jsx)(Oe.h,{menu:(0,p.jsx)(sa.P,{uri:e,albumUri:i?.uri,artists:s}),children:(0,p.jsx)(Ht.w,{uri:e,contextUri:d,index:c,onTriggerPlay:(e,t)=>{j({loggingParams:t})},isActive:R,ariaRowIndex:c+1,isPlayable:k,isAnyArtistBanned:S,handleArtistBanUndoClick:E,ageRestricted:r,dragMetadata:{name:t,createdBy:N},allowedDropTypes:[],spec:f,isCompactMode:y,children:b.map((({columnType:r,options:n},l)=>{const o=(0,Qa.y)(l,r,b);return(0,p.jsx)(o,{ariaColIndex:l,children:(()=>{switch(r){case pt.$.INDEX:return(0,p.jsx)(Ha.$,{uri:e,className:Xt.A.rowMarkerChartStatus,playAriaLabel:u.Ru.get("tracklist.a11y.play",t,N),onClick:(e,t)=>{v({loggingParams:t})},isPlaying:T,isActive:R,spec:f,children:x?(0,p.jsx)($a,{number:c+1,status:x}):(0,p.jsx)(qa.a,{children:c+1})});case pt.$.TITLE_AND_ARTIST:case pt.$.TITLE_AND_AUTHOR:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Va.e,{src:m}),(0,p.jsxs)(Ft.l,{children:[(0,p.jsx)(Wt.p,{titleText:t,children:t}),L&&(0,p.jsxs)(_t.P,{children:[I.download&&(0,p.jsx)(Yt._,{}),I.explicit&&(0,p.jsx)(Ge.U,{}),I.nineteen&&(0,p.jsx)(Qt.q,{className:Xt.A.nineteen,size:16})]}),(0,p.jsx)(la.p,{children:(0,p.jsx)(ia.l,{artists:s,spec:f})})]})]});case pt.$.TITLE:return(0,p.jsxs)(Wa.q,{children:[A?(0,p.jsx)(Ye.N,{to:e,className:Xt.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(Wt.p,{titleText:t,children:t})}):(0,p.jsx)(Wt.p,{titleText:t,children:t}),L&&(0,p.jsxs)(_t.P,{children:[I.download&&(0,p.jsx)(Yt._,{}),I.explicit&&(0,p.jsx)(Ge.U,{}),I.nineteen&&(0,p.jsx)(Qt.q,{className:Xt.A.nineteen,size:16}),I.hasAssociatedVideo&&(0,p.jsx)(Ga.l,{})]})]});case pt.$.ARTIST:case pt.$.AUTHOR:return(0,p.jsx)(Ya.Y,{children:s&&(0,p.jsx)(Ma.E,{artists:s,spec:f})});case pt.$.PLAYS:return(0,p.jsx)(Ka.Y,{playcount:h});case pt.$.ALBUM_OR_PODCAST:case pt.$.ALBUM:return(0,p.jsx)(Ot.g,{uri:i.uri,name:i.name,creatorUri:s?.[0]?.uri,spec:f,children:i.name});case pt.$.DURATION:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(oa.d,{uri:e,spec:f}),!n?.hideDuration&&(0,p.jsx)(ra.P,{duration:a}),(0,p.jsx)(na.Y,{menu:(0,p.jsx)(sa.P,{uri:e,albumUri:i?.uri,artists:s}),label:u.Ru.get("more.label.track",t,N),spec:f})]});case pt.$.ADDED_BY:case pt.$.ADDED_AT:case pt.$.RELEASE_DATE:case pt.$.ACTIONS:case pt.$.ALBUM_OR_SHOW:case pt.$.EVENT_DATE:case pt.$.EVENT_INFO:case pt.$.CONCERT_DATE:case pt.$.CONCERT_VENUE:case pt.$.ADD:case pt.$.BPM:case pt.$.KEY:case pt.$.VIBE:return null;default:(0,te.d)(r)}return null})()},`column-${l}`)}))})})})}),((e,t)=>e.uri===t.uri&&e.isCompactMode===t.isCompactMode));var Xa=a(74971);const Za={column:null,order:pt.H.NONE},es=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,scrollToUid:i,usePlayContextItem:r,tracklistDomRef:n,sortableColumns:l,isCompactMode:o=!1}){const c=(0,ja.m)(),{filter:u,setFilter:d}=(0,s.useContext)(I.g),m=(0,s.useRef)(null),x=(0,s.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,Pa.H)(a,x);const{sortState:h,setSortState:g}=(0,s.useContext)(L.cL),y=(0,s.useCallback)((e=>{g((0,E.So)(e,h))}),[h,g]);(0,s.useEffect)((()=>{g(Za),d("")}),[a,d,g]),(0,s.useEffect)((()=>{m.current&&i&&m.current.scrollToItem({uid:i})}),[i]);const f=(0,s.useCallback)((async(e,t)=>{const s=await c.getContents(a,{offset:e,limit:t,sort:(0,E.Xt)(h),filter:u,decorateFormatListData:!0});return{items:s.items,totalLength:s.totalLength}}),[a,c,h,u]),b=(0,s.useCallback)(((e,t)=>{const s=(0,Xa.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(Ja,{index:t,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:s?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:r,isCompactMode:o},t+e.uri)}),[a,r,o]),A=(0,Da.w)(),R=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(Gt.pZ,{value:"chart-tracklist",children:(0,p.jsx)(mt.S4,{ariaLabel:e,hasHeaderRow:!0,columns:A,sortableColumns:l,sortState:h,onSort:y,renderRow:b,resolveItem:R,nrTracks:t,fetchTracks:f,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:n,columnPersistenceKey:"chart-tracklist",isCompactMode:o,className:Xt.A.chartTrackList},a)})}));var ts=a(21743),as=a(71420),ss=a(60367),is=a(96022),rs=a(76034);function ns(e,t){return e.build().withHost(is.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:`playlistURI:${t}`,limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var ls=a(81961),os=a(76698);const cs="BagEpNps_J8R2QuHRZMa",us="bjB8WZd0Ev30ZFbiScDm",ds=(0,s.memo)((({uri:e})=>{const{scrollNodeRef:t}=(0,s.useContext)(M.bi),{ref:a,inView:i}=(0,ts.Wx)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),r=function(e,t){const{data:a}=(0,rs.Z)(ns,[e],{enabled:t,staleTime:36e5,gcTime:72e5});return a?.body.content?.items}(e,i),n=(0,s.useRef)(null),l=function(e){const[t,a]=(0,os.x)("mlt-height",300),i=(0,s.useCallback)((()=>{const t=e.current?.getBoundingClientRect()?.height;t&&a(t)}),[e,a]);return(0,ls.w)({refOrElement:e,observeOnly:"height",onResize:i,observeOnMount:!0}),t}(n);return 0===r?.length?null:(0,p.jsx)("div",{className:cs,style:{"--last-height":`${l}px`},ref:a,children:r&&(0,p.jsx)(ss.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:u.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:r.length,elementRef:n,className:us,children:r.map(((e,t)=>(0,p.jsx)(as.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri)))})})}));var ms=a(20673),ps=a(69319),xs=a(16683),hs=a(60007),gs=a(3602),ys=a(68056),fs=a(97152),bs=a(29294),As=a(1335),Rs=a(39521),Ts=a(40748),js=a(31214),vs=a(43494),Cs=a(15437),ks=a(20729),Ss=a(80948);const Es={bottomEnd:Ss.dw.topStart,top:Ss.dw.bottom},Is=({visible:e,onHide:t,placement:a,children:s,label:i})=>(0,p.jsx)(Cs.W,{placement:a,withPortal:!0,overlay:e&&(0,p.jsx)("div",{children:(0,p.jsx)(ks.A,{arrow:Es[a],colorSet:"announcement",onClose:t,children:i})}),children:s});var Ls=a(24528),Ns=a(2150),ws=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(ws||{});const Ps=({uri:e,label:t,onClick:a,size:s=ws.md})=>{const{onCopyLink:i}=(0,Ns.J)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:n}=(0,Ls.R)();return(0,p.jsx)(Is,{visible:r,onHide:()=>n(!1),label:u.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(vs.Zp,{label:t,children:(0,p.jsx)(Ts.H,{onClick:e=>{a?.(e),i?.()},iconOnly:js.h,size:s,"aria-hidden":"true","aria-label":t,condensed:!0})})})};var Us=a(35067),Ds=a(11717),Ms=a(67756);const Os=s.memo((({metadata:e,tracklistDomRef:t,sortableColumns:a})=>{const{hasSpotifyAudiobooks:i}=e,r=i||!1,{spec:n,logger:l}=(0,O.r)(Us.E,{}),o=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[l,n]),c=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().hitClearFilter())}),[l,n]);return(0,p.jsxs)("div",{className:ht.A.searchBoxContainer,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Ds.S,{placeholder:u.Ru.get("playlist.search_in_playlist"),onFilter:o,onClear:c,clearOnEscapeInElementRef:t})}),(0,p.jsx)(Ms.d,{columns:[...a],isBooklist:r})]})}));var _s=a(29434),Bs=a(33811),Fs=a(17566);const zs=()=>null;var $s=a(94601),Vs=a(49811),Ws=a(83989),Hs=a(19412),qs=a(63112);const Ks=s.memo((function({playlist:e,capabilities:t,spec:a,isPlaying:i,isActive:r,togglePlay:n,isBooklist:o,isConcert:c=!1,backgroundColor:d,tracklistDomRef:m,sortableColumns:x,className:h}){const{metadata:{uri:g,name:y,unfilteredTotalLength:f,isOwnedBySelf:b,isRootlistable:A,canPlay:R,isPublished:T,totalLength:j}}=e,v=(0,Ws.n)(),C=(0,it.s)(),k=(0,s.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),S=t.canFilter&&f>0,E=t.canSort&&f>0,I=f>0,L=(0,l.NC)(Hs.McC,{loadingValue:!1}),N=(0,Fs.X)(),w=(0,$s.x)(),[P,U]=(0,Je.A)(g),D=(0,qt.W)(),M=(0,s.useCallback)((async()=>{D({targetUri:g,intent:P?"unsave":"save",type:"click"});try{await U(!P)}catch{}}),[P,D,U,g]),_=(0,s.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:g,shareId:""});C.logInteraction(e)}),[a,C,g]),B=(0,Rs.d$)(),{spec:F,logger:z}=(0,O.r)(ms.e,{data:{uri:g}});(0,s.useEffect)((()=>{B&&z.logImpression(F.impression())}),[B,z,F]);const $=(0,s.useCallback)((()=>{let e;const t=a.heartButtonFactory();P?e=t.hitUnfollow({itemToBeUnfollowed:g}):(e=t.hitFollow({itemToBeFollowed:g}),B&&z.logInteraction(F.hitFollow({itemToBeFollowed:g}))),C.logInteraction(e),M()}),[a,M,P,C,g,B,z,F]),V=(0,Vs.j)(),W=S&&E;return(0,p.jsx)(ps.E,{backgroundColor:d,className:h,children:(0,p.jsxs)(xs.S,{children:[R&&!o?(0,p.jsx)(bs.D,{onClick:n,isPlaying:i,size:V,uri:g,ariaPlayLabel:u.Ru.get("playlist.a11y.play",y),ariaPauseLabel:u.Ru.get("playlist.a11y.pause",y)}):null,N&&j>0&&!o&&(0,p.jsx)(qs.r,{spec:k,children:(0,p.jsx)(_s.Y,{shuffleContext:Bs.b.playlistActionBar,entityName:y,contextUri:g,isActive:r,activationPlacement:"bottomEnd",size:V})}),!b&&A?(0,p.jsx)(ys.e,{children:(0,p.jsx)(we.M,{isAdded:P,onClick:$,size:V,condensed:!0})}):null,!o&&(0,p.jsx)(hs.f,{uri:g,isFollowing:P,canDownload:I,onClick:(e,t)=>(0,Qe.Qv)(t,a.downloadButtonFactory(),C,g),onFollow:M,size:V,condensed:!0}),(0,p.jsx)(fs.u,{property:Hs.G6N,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&v&&(!o||L)?(0,p.jsx)(Ps,{onClick:_,label:u.Ru.get("permissions.invite-collaborators",y),uri:g,size:V}):null}),(c||o)&&(0,p.jsx)(De.w,{uri:g,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:c?"concerts-near-you/share":"booklist/share"},onClick:_,size:V}),w&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(zs,{uri:g,playlistMetadata:e.metadata})}),(0,p.jsx)(Me.b,{onShow:()=>(0,Qe.R2)(a,C),menu:(0,p.jsx)(gs.W,{uri:g,isPublished:T}),children:(0,p.jsx)(Ue.e,{label:u.Ru.get("more.label.context",y),size:V})}),W?(0,p.jsx)(qs.r,{spec:a,children:(0,p.jsx)(Os,{metadata:e.metadata,tracklistDomRef:m,sortableColumns:x})}):(0,p.jsx)("div",{className:ht.A.leadingSlot,children:(0,p.jsx)(fs.u,{property:Hs.mA2,renderNewExperience:()=>(0,p.jsx)(As.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var Ys=a(96613),Qs=a(33058);const Gs=e=>{const t=(0,it.s)(),a=(0,s.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),i=(0,Qs.t)(a);return(0,p.jsxs)("div",{className:ht.A.concertsFooter,children:[(0,p.jsx)(Ye.N,{to:"/concerts",className:ht.A.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:ht.A.promoRow,ref:i,children:[(0,p.jsx)(n.E,{as:"h2",variant:"bodyMediumBold",className:ht.A.promoTitle,children:u.Ru.get("concerts.find_more")}),(0,p.jsx)(Ys.v,{as:"span",selected:!0,children:u.Ru.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:ht.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:ht.A.disclaimerContainer,children:(0,p.jsx)(n.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:u.Ru.get("concerts_near_you.playlist_disclaimer")})})]})};var Js=a(7557),Xs=a(56829),Zs=a(23617);const ei="multiUserAttributionDisplayNamesV2";function ti(e){return(0,wa.Jy)(e)||(0,wa.xp)(e)}function ai(e){return(0,wa.Jy)(e)||(0,wa.xp)(e)||(0,wa.pW)(e)}const si=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,playlistName:r,isMixedMedia:n,isLive:o,isBlend:m,isConcert:x,isBooklist:h,canEdit:g,scrollToUid:y,feedbackPath:b,deleteFeedbackPath:A,usePlayContextItem:R,tracklistRef:T,tracklistDomRef:j,canRemove:v,spec:C,initialItems:k,isCompactMode:S=!1,sortableColumns:w,hasSpotifyAudiobooks:P}){const U=(0,it.s)(),D=(0,l.NC)(Hs.LX5),M=(0,ja.m)(),{filter:O}=(0,s.useContext)(I.g),{sortState:_,setSortState:B}=(0,s.useContext)(L.cL),F=(0,s.useRef)((()=>{})),[z,$]=(0,s.useState)([]),V=(0,i.wA)(),W=(0,Da.w)(),H=(0,s.useCallback)((()=>{T?.current&&T.current.update()}),[T]);(0,Pa.H)(a,H);const q=(0,s.useCallback)(((e,t)=>{B((0,E.So)(e,_)),U.logInteraction(C.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[B,_,U,C]),K=(0,s.useCallback)((e=>{F.current(),M.remove(a,e)}),[M,a]),Y=(0,s.useCallback)(((e,t,a=!1)=>{v&&(F.current=t,e.length>1&&!a?$(e):K(e))}),[v,K]);(0,s.useEffect)((()=>{T?.current&&y&&T.current.scrollToItem({uid:y})}),[y,T]);const Q=(0,s.useCallback)((async(e,t)=>{const s=await M.getContents(a,{offset:e,limit:t,sort:(0,E.Xt)(_),filter:O,decorateFormatListData:!!b||o||m});return{items:s.items,totalLength:s.totalLength}}),[a,M,_,O,b,o,m]),G=(0,s.useCallback)(((e,t,s)=>{if(!T?.current)return;const i=T.current.getRows()[t];i&&(U.logInteraction(C.dragSort()),s===Ht.Y.Before?M.move(a,e,{before:i}):M.move(a,e,{after:i}))}),[T,U,C,M,a]),J=(0,s.useCallback)(((e,t,s)=>{if(!T?.current)return;const i=T.current.getRows()[t];i&&(U.logInteraction(C.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),s===Ht.Y.Before?V((0,d.io)(a,e,{before:{uri:i.uri,uid:i.uid}})):V((0,d.io)(a,e,{after:{uri:i.uri,uid:i.uid}})))}),[T,U,C,a,V]),X=(0,s.useCallback)(((e,t)=>{let s,i=null;(0,wa.xp)(e)?(i=e.show,s=e.images.concat(e.show?.images||[])):(0,wa.Jy)(e)?(i=e.album,s=e.album?.images):(0,wa.pW)(e)&&(s=e.images);const l=(0,Xa.g)(s,{desiredSize:40,desiredLabel:"small"});let o=[];g&&_.order===pt.H.NONE&&(o=h?[f.fl.AUDIOBOOKS]:[f.fl.TRACKS,f.fl.LOCAL_TRACKS,f.fl.EPISODES,...P?[f.fl.AUDIOBOOKS]:[]]);const u="1"===e?.formatListAttributes?.["dislike-feedback-selected"],d=!!(0,wa.xp)(e)&&e.podcastSubscription.isUserSubscribed;let y=!1;(0,wa.xp)(e)&&e.podcastSubscription.isPaywalled&&!d?y=!0:ti(e)?y=e.isPlayable&&!u:(0,wa.pW)(e)&&(y=!0);let T=!1;(0,wa.xp)(e)&&e.podcastSubscription.isPaywalled?T=!0:(0,wa.pW)(e)&&(T=e.isLocked&&!e.isOutOfMarket);const j=m&&((e,t)=>{const a=[];if(!t)return a;const s=t[ei]?ei:"multiUserAttributionDisplayNames",i=t?.[s]?.split(","),r=t?.multiUserAttributionImages?.split(",");if(!i||!r)return a;const n=t?.multiUserAttributionUsernamesV2?.split(",")||[],l=t?.multiUserAttributionType?.split(",")||[],o=i.length;for(let e=0;e<o;e++){const t=n[e],s=t&&(0,c.Qjr)(t).toURI();a.push({username:t,uri:s,displayName:i[e],images:(u=r[e],u.length>1?[{url:u}]:[]),recsplanation:l[e]})}var u;return a.sort(((t,a)=>t.username?t.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let C=0;ti(e)?C=e.duration.milliseconds:(0,wa.pW)(e)&&(C=e.durationMs||0);let k="";ai(e)&&(k=e.name);let E=null;return(0,wa.xp)(e)&&(E=e.gatedEntityRelations),(0,p.jsx)(Zs.W,{isCompactMode:S,index:t,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:y,duration_ms:C,isPaywalled:T,isUserSubscribed:d,name:k,artists:(0,wa.Jy)(e)?e.artists:void 0,albumOrShow:i,isExplicit:(ai(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,wa.Jy)(e)&&e.hasAssociatedVideo&&D)??!1,isMixedMedia:n,isLocal:(0,wa.Jy)(e)&&e.isLocal,addedBy:j,hasDecoratedAddedBy:M.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,wa.xp)(e)&&e.release.date||"",isMOGEFRestricted:((0,wa.Jy)(e)||(0,wa.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:l?.url||"",onMove:G,onInsert:J,usePlayContextItem:R,allowedDropTypes:o,feedbackPath:b,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:A,isDisliked:u,isBlend:m,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:v,playlistName:r,isConcert:x,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:(0,wa.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,wa.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,wa.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:g,bpm:(0,wa.Jy)(e)?e.bpm:void 0,musicKey:(0,wa.Jy)(e)?e.key:void 0,gatedEntityRelations:E},t+e.uri)}),[g,h,_.order,m,S,a,D,n,M,G,J,R,b,A,v,r,x,P]),Z=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ee]=(0,N.z1)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Gt.pZ,{value:"playlist-tracklist",children:(0,p.jsx)(mt.S4,{isCompactMode:S,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:W,sortableColumns:w,sortState:_,onSort:q,onRemove:Y,renderRow:X,resolveItem:Z,nrTracks:t,fetchTracks:Q,limit:100,canFetchAllTracks:M.getCapabilities().canFetchAllTracks,outerRef:T,outerDomRef:j,tracks:k,isConcertPlaylist:x,onNrValidItemsChange:ee,columnPersistenceKey:"playlist-tracklist"},a)}),(0,p.jsx)(Xs.F,{title:u.Ru.get("playlist.remove_from_playlist",r),isOpen:z.length>0,tracks:z,onClose:e=>{e.stopPropagation(),$([])},onRemove:K})]})}));var ii=a(94465);var ri=a(75129),ni=a(52853);const li={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},oi=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},ci=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const a=t[1],s=/([^:]+):([^:]+)/g;let i;const r=[],n=[];for(;i=s.exec(a);){const e=i[1];let t=i[2];e===li.USER&&(t=oi(t)),r.push(e),n.push(t)}if(0===r.length)return{type:null,id:null};const l=r.reduce(((e,t,a)=>(e[r[a]]=n[a],e)),{});return{type:r[r.length-1],id:n[n.length-1],...l}};var ui=a(80895),di=a(43211),mi=a(34889);const pi=new z.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),xi=3e5;function hi(e,t){return["list-extender",e,t]}const gi=(e,t,a=10,i)=>{const r=2*a,n=3*a,l=(0,mi.jE)(),c=(0,s.useRef)(0),[u,d]=(0,s.useState)(e),[m,p]=(0,s.useState)((()=>l.getQueriesData({queryKey:hi(e,t),stale:!1}).at(0)?.[1]??[])),x=(0,s.useRef)(m.map((e=>e.uri??""))),{spec:h,logger:g}=(0,O.r)(o.K,{data:{uri:e}}),y=(0,s.useMemo)((()=>h.recommendedFactory()),[h]);(0,di.e)(ui.Lj.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===ui.sP.ADD?p((e=>e.filter((e=>a.uris.every((t=>t!==e.uri)))))):a.operation===ui.sP.REMOVE&&p((e=>e.filter((e=>a.items.every((t=>t.uri!==e.uri)))))),a.operation!==ui.sP.ADD&&a.operation!==ui.sP.REMOVE||l.invalidateQueries({queryKey:hi(e,t)}))}));const f=(0,s.useRef)(!0);(0,s.useEffect)((()=>(f.current||(p([]),d(e),x.current=[],c.current=c.current+1),f.current=!0,()=>{c.current=c.current+1})),[e]),(0,s.useEffect)((()=>{if(m.length<r){const e=Math.min(r,n-m.length),a=c.current,s=hi(u,t),o=f.current&&0===x.current.length;(o?l.fetchQuery({queryKey:s,queryFn:()=>i(u,[],e),staleTime:xi,gcTime:xi}):i(u,x.current,e)).then((t=>{if(a!==c.current||!t)return;const i=t.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));t.length<e&&x.current.length?x.current=[]:x.current=[...x.current,...i],p((e=>[...e,...t])),o&&l.setQueryData(s,t)}))}f.current=!1}),[r,n,u,m.length,l,i,t]);const b=(0,s.useCallback)((()=>{if(h){const e=y.refreshButtonFactory().hitRefreshContent();g.logInteraction(e)}p((e=>e.slice(a)))}),[g,y,h,a]);return{recommendations:m.slice(0,a),_bufferedRecommendations:m.slice(a),refresh:b}},yi=s.memo((function({uri:e}){const{recommendations:t,refresh:a}=((e,t=10)=>{const a=(0,ja.m)(),{request:i}=(0,s.useContext)(ga.j),r=(0,s.useCallback)((async(e,t,s)=>{const r=await a.getRecommendedBookUris(e,t,s),n=await i(pi,{uris:r});return n?.data?.podcasts.map((e=>"Audiobook"===e.__typename?G(e):null)).filter(ee.P)??[]}),[a,i]);return gi(e,"book",t,r)})(e),{draggable:i,onDragStart:r}=(0,pa.P)(),l=(0,ni.p)();return l?t?.length&&t.length>0?(0,p.jsxs)("div",{className:ht.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:ht.A.top,children:(0,p.jsxs)("div",{className:ht.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:u.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ht.A.subtitle,children:u.Ru.get("playlist.extender.songs.in.playlist")})]})}),l&&(0,p.jsxs)(p.Fragment,{children:[t.map(((t,a)=>t?(0,p.jsx)(ut,{contextUri:e,index:a,featureIdentifier:"playlist_recommendations",book:t,sharingInfo:t.sharingInfo,isRecommendation:!0,draggable:i,onDragStart:e=>{r(e,{itemUris:[t.uri],itemMimeTypes:[f.fl.AUDIOBOOKS],dragLabelText:t.name})},showSeparator:0!==a},a):null)),(0,p.jsx)(Ts.H,{className:ht.A.refreshButton,onClick:a,children:u.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:ht.A.recommendedTrackList,children:(0,p.jsx)("div",{className:ht.A.top,children:(0,p.jsxs)("div",{className:ht.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:u.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ht.A.subtitle,children:u.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})}));var fi=a(2607);const bi=s.memo((function({playlistUri:e,canEdit:t,tracks:a}){const i="1"===(0,fi.$)("filter-age-restricted-content"),{usePlayContextItem:r}=(0,tt.P)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:K.c.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),n=(0,s.useCallback)(((a,s)=>{const n=a.duration;return(0,p.jsx)(da,{index:s,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!(i&&a.isMOGEFRestricted),name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:r,durationMs:n,shouldRenderDuration:!t,internalLink:!0},`${s}-${a.uri}`)}),[e,i,r,t]),l=(0,s.useMemo)((()=>[pt.$.TITLE_AND_ARTIST,pt.$.ALBUM,pt.$.ADDED_AT,pt.$.ADD]),[]),o=(0,s.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),c=(0,s.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,p.jsx)(mt.S4,{ariaLabel:u.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:dt.qq,tracks:c,renderRow:n,resolveItem:o,columns:l},`${e}-recommended`)})),Ai=s.memo((function({playlistUri:e,playlistLength:t,canEdit:a}){const{recommendations:i,refresh:r}=((e,t=10)=>{const a=(0,ja.m)(),i=(0,s.useCallback)((async(e,t,s)=>{const i=t.map((e=>ci(e).id??""));return a.getRecommendedTracks(e,i,s)}),[a]);return gi(e,"track",t,i)})(e),l=!t||0===t,o=(0,ni.p)(),c=l?u.Ru.get("playlist.extender.empty.playlist"):u.Ru.get("playlist.extender.songs.in.playlist");return o?i.length>0?(0,p.jsxs)("div",{className:ht.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:ht.A.top,children:(0,p.jsxs)("div",{className:ht.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:u.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ht.A.subtitle,children:c})]})}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(bi,{playlistUri:e,canEdit:a,tracks:i}),(0,p.jsx)(Ts.H,{className:ht.A.refreshButton,onClick:r,children:u.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:ht.A.recommendedTrackList,children:(0,p.jsx)("div",{className:ht.A.top,children:(0,p.jsxs)("div",{className:ht.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:u.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ht.A.subtitle,children:u.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})}));var Ri=a(67138);class Ti{async deleteChanges(e){throw new Error("Method not implemented.")}async getChanges(e){throw new Error("Method not implemented.")}async applyChanges(e,t){throw new Error("Method not implemented.")}async applyChangesNewPlaylist(e,t){throw new Error("Method not implemented.")}async previewChanges(e,t){throw new Error("Method not implemented.")}async getTrackPairTransitionMetadata(e){throw new Error("Method not implemented.")}maybeApplyAutoTuna(e){throw new Error("Method not implemented.")}turnOnMix(e){throw new Error("Method not implemented.")}turnOffMix(e){throw new Error("Method not implemented.")}}const ji=(0,s.createContext)(null);const vi=function({children:e}){const t=(0,s.useMemo)((()=>new Ti),[]);return(0,p.jsx)(ji.Provider,{value:t,children:e})},Ci=()=>{};var ki=a(30164),Si=a(55624),Ei=a(30105),Ii=a(44474),Li=a(65489),Ni=a(63319);const wi=["meta+v"];var Pi=a(95052),Ui=a(66641),Di=a(97020),Mi=a(50885),Oi=a(92451),_i=a(84817),Bi=a(27602);const Fi=s.lazy((()=>a.e(4789).then(a.bind(a,21307)))),zi=s.lazy((()=>Promise.resolve().then(a.bind(a,60292)))),$i=s.lazy((()=>Promise.all([a.e(4151),a.e(3632)]).then(a.bind(a,49919)))),Vi=s.lazy((()=>Promise.all([a.e(4151),a.e(9718)]).then(a.bind(a,19898)))),Wi=new Set([]),Hi=s.memo((function({playlist:e,capabilities:t}){const{metadata:{uri:a,name:m,images:x,totalLength:h,unfilteredTotalLength:g,isOwnedBySelf:T,hasEpisodes:S,canAdd:_,canRemove:B,formatListData:F,hasDateAdded:z,collaborators:V,isPublished:W,hasSpotifyAudiobooks:H,hasSpotifyTracks:q},contents:{items:K}}=e,{spec:Y,logger:Q,UBIFragment:G}=(0,O.r)(o.K,{data:{uri:a}});Ci(a,e.metadata);const J=(0,Ws.n)(),X=(0,l.NC)(Bi.Cf,{loadingValue:!1}),Z=(0,l.NC)(Bi.Mc,{loadingValue:!1}),ee=(0,l.NC)(Hs.FQE,{loadingValue:!1}),te=(0,Ri.m)(),{isCompactMode:ae}=(0,ki.a)(),se=s.useMemo((()=>Y.headerFactory()),[Y]),ie=s.useMemo((()=>Y.tracklistFactory()),[Y]),re=s.useMemo((()=>Y.actionBarFactory()),[Y]),ne="chart"===F?.type,le="concerts-near-you"===F?.type&&X,oe="live-streams"===F?.type,ce=["blend","celebrity-blend","friends-mix"].indexOf(F?.type||"")>-1,ue=[q,S,H].filter(Boolean).length>1,de=!ue&&!!H&&(0,ri.R)(K),me="artistsets"===F?.type||"this-is"===F?.attributes["editorial.series"],pe=F?.attributes||{},xe=pe.header_image_url_desktop||pe.image_url||null,he=_&&B,{isInlineCurationVisible:ge,showInlineCuration:ye,hideInlineCuration:be}=((e,t)=>{const[a,i]=(0,s.useState)(e&&0===t),r=(0,s.useRef)(a),{scrollNodeChildRef:n}=(0,s.useContext)(M.bi),{spec:l,logger:o}=(0,O.r)(D.e,{}),c=(0,s.useCallback)((()=>{i(!0),o.logInteraction(l.findMoreButtonFactory().hitUiReveal())}),[o,l]),u=(0,s.useCallback)((()=>{i(!1),o.logInteraction(l.closeButtonFactory().hitUiHide())}),[o,l]);return(0,s.useEffect)((()=>{n&&!r.current&&a&&n.current?.scrollIntoView({block:"end",behavior:"smooth"}),r.current=a}),[n,a]),{isInlineCurationVisible:a,showInlineCuration:c,hideInlineCuration:u}})(he&&(!de||Z&&ee),g),{productState:Ae}=(0,i.d4)(Pi.Ht),Re=!!Ae?.ads&&parseInt(Ae.ads,10)>0,Te="spotify"===e.metadata.owner.username,je=(0,i.wA)(),ve=(0,r.wQ)(),Ce=(0,r.zy)(),ke=(0,l.NC)(Hs.vQ3,{loadingValue:!1}),Se=(0,l.NC)(Hs.UPi,{loadingValue:!1}),Ee=(0,P.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*$.i,enabled:me}).data?.playlistV2,Ie="Playlist"===Ee?.__typename?Ee.artistsOnTour?.[0]:null,Le=Se&&"Playlist"===Ee?.__typename?Ee.concerts?.items.map((e=>e.data)):null,Ne=Le?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const t=[e.location.name,e.location.city].join(u.Ru.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url,saved:e.saved}})),we="POP"!==ve?new URLSearchParams(Ce.search).get("uid"):null,Pe=(0,qt.W)(),{filter:Ue}=(0,s.useContext)(I.g),{sortState:De}=(0,s.useContext)(L.cL),Me=(0,ja.m)(),Oe=(0,s.useRef)(null),_e=(0,s.useRef)(null),[Be]=x,Fe=(0,Si.H)(null!==xe?xe:Be?.url||null),{contentsOptions:ze}=(0,Ia.$)(De,Ue),{isPlaying:$e,isActive:Ve,togglePlay:We,usePlayContextItem:He}=(0,tt.P)((0,Mi.A)(a,ze),{featureIdentifier:"playlist"}),qe=(0,s.useCallback)((()=>{const e=(0,Qe.$I)({isPlaying:$e,isActive:Ve,spec:re.playButtonFactory(),logger:Q,uri:a});We({loggingParams:e})}),[$e,Ve,We,re,Q,a]);!function(e){const t=(0,Ei._)(),a=(0,fe.YQ)((()=>{t.paste().then((t=>e(t)))}),500,{leading:!0,trailing:!1});(0,Ni.f)(wi,a),(0,Li.x)(Ii.W.PASTE,a)}((0,s.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.o_h)(e))).filter((e=>null!==e&&((0,c.U_m)(e)||(0,c.gHQ)(e)||(0,c.PkR)(e))));if(t.length>0&&_){const e=t.map((e=>e.toURI())),s=Oe.current?.getSelected()?.slice(-1)?.[0],i={after:s??"end"};je((0,d.io)(a,e,i))}}),[_,je,a]));const Ke=(0,s.useCallback)((e=>{const t=[...e[f.fl.TRACKS]||[],...e[f.fl.LOCAL_TRACKS]||[],...e[f.fl.EPISODES]||[],...e[f.fl.ALBUMS]||[],...e[f.fl.AUDIOBOOKS]||[]];t.length>0&&_&&(Q.logInteraction(Y.dragAddToPlaylist({playlist:a,itemToBeAdded:t[0]})),je((0,d.io)(a,t)),Pe({targetUri:a,intent:"add",type:"drop"}))}),[_,Q,Y,a,je,Pe]),Ye=!Te&&0!==g,Ge=!de&&!S&&J&&(he&&!ge||Ye),Je=de&&Z&&ee&&J&&(he&&!ge||Ye),Xe=(!de||Z&&ee)&&T&&J,Ze=!he&&!de&&!Ye&&J,et=(0,k.e4)(),at=(0,k.IL)(),st=(0,k.mn)(),it=(0,k.wW)(),rt=!(S||H||0===g||Te||Ze),nt=rt&&et,lt=rt&&at,ot=rt&&st,ct=rt&&it,ut=(0,j.x)(),dt=`${a}|[]`;(0,s.useEffect)((()=>{ot||ct||nt||lt||ut(dt)}),[dt,ut,ot,ct,nt,lt]);const mt=e.metadata.owner.displayName!==e.metadata.owner.username&&e.metadata.owner.displayName?u.Ru.get("internal-link-recommender.more-by-name",{name:e.metadata.owner.displayName}):u.Ru.get("internal-link-recommender.more-by-listener"),pt=V?.count??1,[xt]=(0,N.z1)(),gt="plays"===pe.rank_type,yt=(0,s.useMemo)((()=>(0,E.Ey)({isMixedMedia:ue,hasEpisodes:S,hasSpotifyAudiobooks:H,hasDateAdded:z,isLive:oe,isConcert:le,isBlend:ce,nrCollaborators:pt,isBooklist:de,isCompactMode:ae,isChart:ne,showPlayCount:gt,isExtraColumnsEnabled:te})),[ue,S,H,z,oe,le,ce,pt,de,ae,ne,gt,te]),ft=(0,s.useMemo)((()=>{let e;return e=Me.getCapabilities().canSort?de?new Set(L.dh):new Set((0,E.zq)(yt)):Wi,e}),[yt,de,Me]),bt=ee&&de&&!ae,At=(0,s.useMemo)((()=>{const e=de?[f.fl.AUDIOBOOKS]:[f.fl.TRACKS,f.fl.LOCAL_TRACKS,f.fl.EPISODES,f.fl.ALBUMS];return{[b.Nz.ON]:_?e:[]}}),[_,de]),{className:Rt,dropPosition:Tt,...jt}=(0,A.A)({allowedMimeTypesByDropPosition:At,onDrop:Ke});return(0,p.jsxs)(s.Suspense,{fallback:null,children:[(0,p.jsx)(U.c,{artistOrShow:e.metadata.owner.displayName,title:m,uri:a,entityType:U.p.PLAYLIST}),(0,p.jsx)(R.Q,{children:(0,_i.Q2)({playlistName:m,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Te})}),(0,p.jsxs)("section",{role:"presentation",className:ht.A.playlist,"data-testid":"playlist-page","data-test-uri":a,...jt,children:[(0,p.jsx)(Js.x,{metadata:e.metadata,isPlaying:$e,isPublished:W,totalItems:xt,togglePlay:qe,backgroundColor:Fe,spec:se,className:Rt}),(0,p.jsxs)("div",{className:ht.A.playlistContent,children:[(0,p.jsx)(Ks,{playlist:e,capabilities:t,spec:re,isPlaying:$e,isActive:Ve,togglePlay:qe,isBooklist:de,backgroundColor:Fe,tracklistDomRef:_e,isConcert:le,sortableColumns:ft,className:Rt}),(0,p.jsxs)("div",{className:Rt,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Fi,{formatListData:e.metadata.formatListData})}),!Se&&Ie?.upcomingEventsCount?(0,p.jsx)(zi,{artistConcertsUri:Ie.uri||"",artistImageUrl:Ie.imageUrl||"",artistName:Ie.title||"",spec:Y}):null,Se&&!!Ie&&Ne&&Ne.length>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)($i,{liveEvents:Ne,artistConcertsUri:Ie.uri||"",artistName:Ie.title||"",spec:Y})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[Re?(0,p.jsx)(y,{playlistUri:a}):null,Re&&Te?(0,p.jsx)(Vi,{uri:a,playlistName:m}):null,e.metadata.hasSpotifyAudiobooks&&ke&&(0,p.jsxs)("div",{className:ht.A.noBooklistSupportContainer,children:[(0,p.jsx)(n.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:u.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:u.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),h>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:bt?(0,p.jsx)(Ua,{initialItems:K,contextUri:a,nrItems:h,canEdit:he,canRemove:B,ariaLabel:m}):(0,p.jsx)(G,{spec:ie,children:(0,p.jsx)(w.a,{columns:yt,children:ne?(0,p.jsx)(es,{ariaLabel:m,nrTracks:h,playlistUri:a,scrollToUid:we,usePlayContextItem:He,tracklistDomRef:_e,sortableColumns:ft,isCompactMode:ae},a):(0,p.jsx)(si,{ariaLabel:m,nrTracks:h,playlistUri:a,playlistName:m,isMixedMedia:ue,isLive:oe,isConcert:le,isBlend:ce,isBooklist:de,canEdit:he,scrollToUid:we,feedbackPath:pe["dislike-endpoint"],deleteFeedbackPath:pe["delete-endpoint"],usePlayContextItem:He,tracklistRef:Oe,tracklistDomRef:_e,canRemove:B,spec:ie,initialItems:K,isCompactMode:ae,sortableColumns:ft,hasSpotifyAudiobooks:H??!1},a)})})}),Xe&&(0,p.jsx)(s.Suspense,{fallback:null,children:ge?(0,p.jsx)(ya,{playlistUri:a,hideInlineCuration:be,isBooklist:de}):(0,p.jsx)("button",{className:ht.A.seeMore,onClick:ye,children:(0,p.jsx)(n.E,{as:"div",variant:"bodySmallBold",children:u.Ru.get("playlist.curation.find_more")})})}),(nt||ot)&&(0,p.jsx)(v.M,{uri:a}),ot&&(0,p.jsx)(C.S,{uri:a,title:mt}),Ge?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(Ai,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:he})}):null,Je?(0,p.jsx)(yi,{uri:a}):null,Ze&&(0,p.jsx)(ds,{uri:a}),(lt||ct)&&(0,p.jsx)(v.M,{uri:a}),ct&&(0,p.jsx)(C.S,{uri:a,title:mt})]})]})]}),le&&(0,p.jsx)(Gs,{spec:Y.footerSectionFactory()})]})]})})),qi=s.memo((function({uri:e}){const t=(0,ja.m)().getCapabilities(),{filter:a}=(0,s.useContext)(I.g),{sortState:i}=(0,s.useContext)(L.cL),{metadataOptions:r,contentsOptions:n}=(0,Ia.$)(i,a),{data:l,isLoading:o,isError:c}=(0,Oi.W)(e,r,n);return(e=>{const t=(0,ii.j)(),a=(0,ja.m)(),i=(0,s.useRef)(!1);(0,s.useEffect)((()=>{t&&i.current&&a.resync(e,{maybe:!0}),t||(i.current=!0)}),[t,a,e])})(e),!l||o?(0,p.jsx)(S.LoadingPage,{hasError:c,errorMessage:u.Ru.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline}):l.metadata.permissions&&!l.metadata.permissions.canView?(0,p.jsx)(T.Z,{uri:e}):(0,p.jsx)(Hi,{playlist:l,capabilities:t})})),Ki=()=>{const{playlistId:e}=(0,r.g)(),t=(0,c.Pse)((e||"").split("&")[0]).toURI();return(0,p.jsx)(Di.P,{surface:Ui.u.PLAYLIST,uris:[t],children:(0,p.jsx)(L.sn,{uri:t,children:(0,p.jsx)(I.s,{uri:t,children:(0,p.jsx)(N.S1,{children:(0,p.jsx)(vi,{children:(0,p.jsx)(qi,{uri:t})})})})})})}},55624:(e,t,a)=>{a.d(t,{H:()=>l});var s=a(30758),i=a(50780),r=a(57286),n=a(65819);function l(e=null,t=i.l0o){const{backgroundColor:a}=(0,r.oI)(),l=(0,r.as)(),o=(0,n.z)(e);return(0,s.useEffect)((()=>(l((0,r.Mo)(o)),()=>{l((0,r.Hf)())})),[o,l]),a||t}},73927:(e,t,a)=>{a.d(t,{X:()=>i});var s=a(56106);function i(e){return[s.kw.YES,s.kw.DOWNLOADING,s.kw.WAITING].includes(e)}},98455:(e,t,a)=>{a.d(t,{A:()=>s});const s={entityRow:"ci11tAmTK1LnxThQkXPy",actions:"_2sJPwAAp1wY1Ftke6iFe",visibleAction:"yuNzasMLs7hvemHI4d8Q",active:"dNymWGRudMrTI6ot9FBg",title:"luWcW9hkbLdFxRQB0yGb",body:"abYR6tZoE7BdzThmWTb0",footer:"GOcKQxqNMhGzbGiAXBig",separator:"yFQjuDAhri_egM1pwn70"}},28689:(e,t,a)=>{a.d(t,{A:()=>s});const s={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map