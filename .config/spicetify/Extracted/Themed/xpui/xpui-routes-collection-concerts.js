"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5783],{30494:(e,t,n)=>{n.d(t,{p:()=>R});var a=n(30758),s=n(97500),i=n.n(s),o=n(6128),r=n(61214),c=n(23893),l=n(2423);const d="(min-width: 0px)",u="(min-width: 0px) and (max-width: 767px)",m="(min-width: 768px)",g="(min-width: 768px) and (max-width: 1023px)",h="(min-width: 1024px)",v="(min-width: 1024px) and (max-width: 1279px)",p="(min-width: 1280px)",x="(min-width: 1280px) and (max-width: 1919px)",f="(min-width: 1920px)",j="FvfvGU3jvHRskUU9v9_8",y="Q9AlbZn2EGzy3MTWXa8X",C="mxmxS0y8LiwSs5nueKPT",k="GXxVAveNFStY3pBI_NO4",_="eHcXC2s97InYP7rMNT0H";var S=n(86070);const R=(0,a.memo)((function(e){const{children:t,message:n,title:a,linkTitle:s,linkTo:R,onClick:b,renderInline:N=!1}=e,{isXSOnly:D,isSMOnly:I}={isXS:(0,l.U)(d),isXSOnly:(0,l.U)(u),isSM:(0,l.U)(m),isSMOnly:(0,l.U)(g),isMD:(0,l.U)(h),isMDOnly:(0,l.U)(v),isLG:(0,l.U)(p),isLGOnly:(0,l.U)(x),isXL:(0,l.U)(f)},U=D||I;return(0,S.jsxs)("section",{className:i()(j,{[y]:N}),children:[t,(0,S.jsx)(o.E,{as:"h1",variant:U?"titleSmall":"titleMedium",className:k,children:a}),(0,S.jsx)(o.E,{variant:U?"bodySmall":"bodyMedium",className:_,children:n}),s&&(R||b)&&(0,S.jsx)(r.$,{colorSet:"invertedLight",className:C,href:R,onClick:b,component:c.v,children:s})]})}))},74542:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(30758),s=n(10796),i=n(6128),o=n(24834),r=n(55285),c=n(96319),l=n(80940);const d="wedRUk4eiBo9n9vqXLhU",u="hMbtEskyvMbDiwq1EScA",m="HYVIJaYYiCTgSCHie70L",g="SPbe_Q1wtiZQCmo0QKUy",h="TRp4tgG7_cymGIXDevIP",v="tC1Y_nwyyly7cpIGqF5K",p="l93AfoV_qHnMQSQBB5GK",x="DgDBmSR2sbwji2UfqxIf",f="EkGb0ZzhswreSvpZoioY";var j=n(86070);const y=(0,a.memo)((e=>{const{uri:t,title:n,imageUrl:a,date:y,subTitle:C,firstParty:k,onClick:_}=e,S=y?(0,c.l4)(y):void 0;return(0,j.jsx)(r.N,{to:t,className:d,"data-testid":"concert-card",onClick:_,children:(0,j.jsxs)("div",{className:u,children:[(0,j.jsx)(l.b,{children:(0,j.jsx)("div",{role:"img",className:f,style:{backgroundImage:`url(${a})`},children:!a&&(0,j.jsx)(s.r,{role:"img",size:"xxlarge",semanticColor:"textSubdued"})})}),S&&(0,j.jsxs)("time",{className:m,dateTime:y,children:[(0,j.jsx)(i.E,{as:"div",variant:"bodySmall",children:(0,c.tj)(S)}),(0,j.jsx)(i.E,{as:"div",variant:"bodyMediumBold",children:(0,c.Py)(S)})]}),(0,j.jsxs)("div",{className:g,dir:"auto",children:[(0,j.jsx)(i.E,{as:"h3",variant:"bodyMedium",className:h,children:n}),(0,j.jsxs)("div",{className:v,children:[k&&(0,j.jsx)("span",{className:x,children:(0,j.jsx)(o.D,{size:"small"})}),(0,j.jsx)(i.E,{as:"span",className:p,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:C})]})]})]})})}))},718:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ra});var a=n(30758),s=n(97500),i=n.n(s),o=n(95440),r=n(20618),c=n(50780),l=n(61214),d=n(40748),u=n(3638),m=n(61762),g=n(66333),h=n(63166),v=n(44176),p=n(64721),x=n(5608),f=n(18212),j=n(87244),y=n(29080),C=n(7777),k=n(98991),_=n(17067),S=n(1978),R=n(29004),b=n(75627),N=n(41089),D=n(91974),I=n(17674),U=n(96613);const w="gTBBvHPsmI4wQAMvZkZg",F="oH8142OCLHWFsonR04W8",E="vnpiTOiF2um7QiJAcpgw",M="uTm3fSPtqqJzQkcfn4yA",B="x4_6X4ZJHSGg6IAuXsXv";var A=n(86070);const L=e=>{const t=(0,a.useMemo)((()=>e.spec?.genreButtonFactory({position:e.position,uri:e.uri})),[e.spec,e.position,e.uri]);return(0,A.jsx)(U.v,{variant:e.isSelected?"contrasting":"tinted",onClick:()=>{t&&t.hitUiElementToggle(),e.onClick()},children:(0,A.jsx)("div",{className:B,children:e.name})},e.uri)},T=e=>{const[t,n]=(0,a.useState)(e.defaultConcepts),s=(0,a.useMemo)((()=>e.spec?.genreDoneButtonFactory()),[e.spec]),i=(0,a.useMemo)((()=>e.spec?.genreClearButtonFactory()),[e.spec]);return(0,A.jsx)(I.A,{contentLabel:p.Ru.get("live_events.label"),isOpen:!0,className:w,onRequestClose:e.onClose,children:(0,A.jsxs)("section",{className:F,children:[(0,A.jsx)("div",{className:E,children:(0,A.jsx)(d.H,{"aria-label":p.Ru.get("close"),iconOnly:N.M,size:"small",onClick:e.onClose})}),(0,A.jsx)(D.I,{mode:"multi-select",layout:"multi-line","aria-label":"",children:e.concepts.map(((a,s)=>{const{uri:i,name:o}=a.data;return(0,A.jsx)(L,{uri:i,name:o,position:s+1,spec:e.spec,isSelected:t.includes(i),onClick:()=>n((e=>e.includes(i)?e.filter((e=>e!==i)):[...e,i]))},i)}))}),(0,A.jsxs)("div",{className:M,children:[(0,A.jsx)(d.H,{onClick:()=>{i&&i.hitUiDeselect(),n([])},size:"small",disabled:0===t.length,children:p.Ru.get("concerts.genres.clear")}),(0,A.jsx)(l.$,{onClick:()=>{s&&s.hitUiSelect(),e.onSave(t)},size:"small",children:p.Ru.get("concerts.genres.done")})]})]})})},P=(e,t,n)=>{const a=n&&n?.length>1?"+"+(n?.length-1):"";return e?[e.name,a].join(" ").trim():t?[t,a].join(" ").trim():p.Ru.get("concerts.genres.all_genres")},z=e=>void 0!==e&&Object.keys(e).includes("data");var O=n(7982),H=n(86565),W=n(50684);const G=new H.l("concertConcepts","query","4dd1f1e7b1f9b986cbff58bad7a38eab99ff26b33bc3e10e0ad5a72af8c489f5",null),K=()=>{const{id:e}=(0,S.g)(),[t]=(0,r.ok)(),n=(0,O.Qe)(e),a=t.getAll("genres").map((e=>(0,b.dDZ)(e).toString()));return{displayName:n?.name,conceptUris:[...new Set(n?[n.id,...a]:a)]}},$=e=>{const t=(0,S.Zp)(),[n]=(0,r.ok)(),{pathname:s}=(0,S.zy)(),i=(0,a.useMemo)((()=>e.spec?.genrePickerButtonFactory()),[e.spec]),{data:o}=(c={geohash:e.geohash??""},(0,W.I)(G,c,d));var c,d;const u=(m=o?.concertConcepts,void 0!==m&&Object.keys(m).includes("items")?o.concertConcepts.items.filter(z):[]);var m;const{displayName:g,conceptUris:h}=K(),[v,p]=(0,a.useState)(!1),[x,f]=(0,a.useState)(h),[j]=x,y=u.find((e=>e.data.uri===j)),C=y||g?l.$:R.n;return(0,A.jsxs)("div",{children:[(0,A.jsx)(C,{size:"small",onClick:()=>{i&&i.hitUiReveal(),p((e=>!e))},className:B,children:P(y?.data,g,x)}),v&&(0,A.jsx)(T,{spec:i,onClose:()=>p(!1),onSave:e=>{n.delete("genres");const[a]=e,i=u.find((e=>e.data.uri===a));if(i){const a=(0,b.o_h)(i.data.uri);e.length>1&&e.forEach((e=>n.append("genres",(0,b.o_h)(e)?.id))),t({pathname:(0,O.DL)(s,a?.id,i?.data.name),search:new URLSearchParams(n).toString()})}else t({pathname:(0,O.DL)(s,void 0,void 0),search:new URLSearchParams(n).toString()});f(e),p(!1)},concepts:u,defaultConcepts:x})]})};var V=n(32884),X=n(73155),Y=(n(11686),n(6128)),Z=n(70043),q=n(67017),Q=n(91985),J=n(3091),ee=n(17176),te=n(6924),ne=n(72653),ae=n(94222),se=n(96644),ie=n(87584),oe=n(63514),re=n(16856),ce=n(54869),le=n(96132),de=n(24808),ue=n(47613),me=n(2283),ge=n(88593),he=n(56708),ve=n(64416),pe=n(79494),xe=n(38408),fe=n(62224),je=n(63240),ye=n(45523),Ce=n(10632),ke=n(54701),_e=n(80675),Se=n(72861),Re=n(76804),be=n(55128),Ne=n(53406),De=n(15643),Ie=n(23848),Ue=n(24428),we=n(48199),Fe=n(61845),Ee=n(83536),Me=n(70756),Be=n(63855),Ae=n(1103),Le=n(73963),Te=n(38903),Pe=n(17530),ze=n(33140),Oe=n(64741),He=n(71418),We=n(44135),Ge=n(6729),Ke=n(32409),$e=n(67031),Ve=n(98045),Xe=n(86111),Ye=n(11554),Ze=n(61753),qe=n(87318),Qe=n(89949),Je=n(22180),et=n(85428);const tt={af:Z.af,am:q.c,ar:Q.ar,arEG:J.m,arMA:ee.E,arSA:te.G,az:ne.az,bg:ae.bg,bn:se.bn,bho:q.c,bs:ie.bs,ca:oe.ca,cs:re.cs,da:ce.da,de:le.de,el:de.el,en:q.c,enGB:ue.b,es419:me.es,es:me.es,esAR:me.es,esMX:me.es,et:ge.et,eu:he.eu,fa:ve.$,fi:pe.fi,fil:q.c,frCA:xe.V,fr:fe.fr,gl:je.gl,gu:ye.gu,he:Ce.he,hi:ke.hi,hr:_e.hr,hu:Se.hu,id:Re.id,is:be.is,it:Ne.it,ja:De.ja,kn:Ie.kn,ko:Ue.ko,lt:we.lt,lv:Fe.lv,mk:Ee.mk,ml:q.c,mr:q.c,ms:Me.ms,nb:Be.nb,ne:q.c,nl:Ae.nl,or:q.c,paIN:q.c,paPK:q.c,pl:Le.pl,ptBR:Te.F,ptPT:Pe.pt,ro:ze.ro,ru:Oe.ru,sk:He.sk,sl:We.sl,sr:Ge.sr,sv:Ke.sv,sw:q.c,ta:$e.ta,te:Ve.te,th:Xe.th,tr:Ye.tr,uk:Ze.uk,ur:q.c,vi:qe.vi,zhCN:Qe.g,zhHK:Je.a,zhTW:et.G,zu:q.c},nt=e=>(e=>Object.keys(tt).includes(e))(e)?tt[e]:q.c;var at=n(12058),st=n(42534);const it=e=>{const t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));const n=new Date(t);return n.setDate(t.getDate()+2),{from:t,to:n}},ot=e=>{const t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));const n=new Date(t);n.setDate(t.getDate()+7);const a=new Date(n);return a.setDate(n.getDate()+2),{from:n,to:a}},rt=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,at.r)(e.from,t.from)&&(0,at.r)(e.to,t.to)),ct=e=>(0,st.x)(e,{representation:"date"});var lt=n(28833),dt=n(11716),ut=n(33058);const mt="C1USyigFSYyc22_BmsgB",gt="Cwo5ZgH_QLzFbSjWjglf",ht="iL7PRv0yTC9UFjHfDJDW",vt="oxBa3kaduGMhYxc9I_Uu",pt="x0xbkRE3CyGK_i406MSX",xt="zT6EzYpjnj9pMKhMFQB7",ft="YOLVSXg5_gdh0VfL2oNl",jt="ynXemVsankd4H506x8D2",yt={formatCaption:e=>p.Ru.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>p.Ru.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>p.Ru.formatDate(e,{weekday:"short"})},Ct=(0,a.memo)((e=>{const{onDone:t,onClose:n,spec:s}=e,[i,o]=(0,a.useState)(e.dateRange),r=(0,lt.W)(),c=(0,ut.t)(s),u=(0,dt.s)(),m=new Date,g=it(m),h=ot(m),v=rt(i,g),x=rt(i,h),f=new Date;return f.setFullYear(f.getFullYear()+1),(0,A.jsx)("div",{ref:c,children:(0,A.jsx)(I.A,{isOpen:!0,children:(0,A.jsxs)("section",{className:mt,children:[(0,A.jsx)(d.H,{className:gt,iconOnly:N.M,size:"small",onClick:n,"aria-label":p.Ru.get("close_button_action")}),(0,A.jsxs)("div",{className:ht,children:[(0,A.jsx)(Y.E,{as:"h3",variant:"bodyMediumBold",children:p.Ru.get("live_events.date_picker_dialog_title")}),(0,A.jsxs)("div",{className:vt,children:[(0,A.jsx)(U.v,{className:pt,size:"md",selectedColorSet:"brightAccent",selected:v,onClick:()=>{o(v?void 0:g),s&&u.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:p.Ru.get("live_events.this_weekend_preset")}),(0,A.jsx)(U.v,{className:pt,size:"md",selectedColorSet:"brightAccent",selected:x,onClick:()=>{o(x?void 0:h),s&&u.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:p.Ru.get("live_events.next_weekend_preset")})]})]}),(0,A.jsx)(X.hv,{mode:"range",selected:i,onSelect:o,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,toDate:f,formatters:yt,dir:r?"rtl":"ltr",modifiersClassNames:{today:xt},locale:nt(p.Ru.getLocaleForFormatting())}),(0,A.jsxs)("div",{className:ft,children:[(0,A.jsx)(d.H,{className:jt,size:"small",onClick:()=>{o(void 0)},disabled:!i?.from,children:p.Ru.get("live_events.date_picker_dialog_clear")}),(0,A.jsx)(l.$,{size:"small",onClick:()=>{if(i?.from){const{from:e,to:n}=i;t({from:e,to:n||e})}else t()},children:p.Ru.get("live_events.date_picker_dialog_done")})]})]})})})})),kt=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,n,a,s]=t;return new Date(parseInt(n,10),parseInt(a,10)-1,parseInt(s,10))},_t=()=>{const[e]=(0,r.ok)(),t=e.get("startDate")?.trim(),n=e.get("endDate")?.trim(),a=kt(t),s=kt(n);return a&&s&&{from:a,to:s}};var St=n(96319);const Rt="WnIhxhr9MIQjVvkvUQTf",bt="ETRYfT8oEUJuUDLgOBUX",Nt="qdpaG8_efSSt25IhC0r_",Dt=e=>{const[t,n]=(0,a.useState)(!1),[,s]=(0,r.ok)(),i=(0,dt.s)(),o=(0,a.useMemo)((()=>e.spec?.datePickerModalFactory()),[e.spec]),c=(0,a.useMemo)((()=>e.spec?.headerFactory()),[e.spec]),d=_t(),u=it(new Date),m=ot(new Date),g=(0,a.useCallback)((e=>{const t={};if(e&&(t.startDate=ct(e.from),t.endDate=ct(e.to),o)){const e=new URLSearchParams(t).toString();i.logInteraction(o.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}n(!1),s(t),o&&i.logInteraction(o.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[s,o,i]),h=(0,a.useCallback)((e=>{const t={};rt(d,e)||(t.startDate=ct(e.from),t.endDate=ct(e.to)),s(t)}),[d,s]),v=d?l.$:R.n;return(0,A.jsxs)("div",{className:Rt,children:[(0,A.jsx)("div",{children:(0,A.jsx)(v,{className:bt,iconLeading:V.R,onClick:()=>{n(!0),c&&i.logInteraction(c.datePickerButtonFactory().hitUiReveal())},size:"small",children:d?(0,St.tX)(d):p.Ru.get("live_events.date_picker_button_text")})}),t&&(0,A.jsx)(Ct,{onClose:()=>{n(!1),o&&i.logInteraction(o.closeButtonFactory().hitUiHide())},onDone:g,dateRange:d,spec:o}),(0,A.jsxs)("div",{className:Nt,children:[(0,A.jsx)(U.v,{size:"sm",selectedColorSet:"brightAccent",selected:rt(d,u),onClick:()=>{if(h(u),c){const e={startDate:ct(u.from),endDate:ct(u.to)},t=new URLSearchParams(e).toString();i.logInteraction(c.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},className:bt,children:p.Ru.get("live_events.this_weekend_preset")}),(0,A.jsx)(U.v,{size:"sm",selectedColorSet:"brightAccent",selected:rt(d,m),onClick:()=>{if(h(m),c){const e={startDate:ct(m.from),endDate:ct(m.to)},t=new URLSearchParams(e).toString();i.logInteraction(c.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},className:bt,children:p.Ru.get("live_events.next_weekend_preset")})]})]})};var It=n(55285),Ut=n(14761),wt=n(99842),Ft=n(5664);const Et="Ig5vKQ7dYBd1EvrAFxNe",Mt="h_q319q68ujja24YIoXY",Bt="dFTQKQt3imsoOza3VE4G",At="M8LA1p3y53Qnge37zUmz",Lt="HZi6Ziy6mVJMFZsPf4wk",Tt="KNX0R2c0r90zNTPYZm6X",Pt="JI0woT5IN6EnNKnilhcg",zt="kAi1CfiOMYDExKkXuw44",Ot="Zwr6T4ceJI7KfyNxa4tS",Ht="mW3O8RnDMDY6MfRJKqd5",Wt="raQK_4Eaqa5Zj06_aBm7",Gt="AOuYgrCnrYvPKsyzxqVy",Kt="P1dra4DUpn36RnCkuwa_",$t="zBCfaF04WlTsiUcov2oJ",Vt="JxTPZX9AoptKanJg0zIw",Xt=(0,a.memo)((e=>{const{concert:t,position:n,modalSpec:s}=e,i=(0,St.l4)(e.concert.startDateIsoString),o=(0,b.o_h)(e.concert.uri),r=(0,a.useMemo)((()=>s?.eventRowFactory({position:n,uri:t.uri})),[s,n,t]),c=(0,dt.s)();return(0,A.jsxs)(It.N,{to:`/concert/${o?.id}`,className:zt,onClick:()=>{r&&c.logInteraction(r.hitUiNavigate({destination:`/concert/${o?.id}`}))},children:[(0,A.jsxs)("div",{className:Ot,"aria-hidden":!0,children:[(0,A.jsx)(Y.E,{as:"div",variant:"marginalBold",className:Ht,children:(0,St.tj)(i)}),(0,A.jsx)(Y.E,{as:"div",variant:"bodyMediumBold",className:Wt,children:(0,St.Py)(i)})]}),(0,A.jsxs)("div",{className:Gt,children:[(0,A.jsx)(Y.E,{as:"div",variant:"bodySmallBold",className:Kt,"data-testid":"event-title",children:t.title}),(0,A.jsx)(Ft.s,{children:(0,St.Fn)(i)}),(0,A.jsxs)(Y.E,{as:"div",variant:"bodySmall",className:$t,children:[(0,St.VJ)(i)," • ",(0,St.WB)(i)]}),(0,A.jsx)(Y.E,{as:"div",variant:"bodySmall",className:Vt,"data-testid":"event-venue",children:[t.location.venue,t.location.city].join(p.Ru.getSeparator())})]})]},t.uri)})),Yt=e=>{const t=(0,a.useMemo)((()=>e.feedSpec?.groupedEventModalFactory({uri:e.artist.uri||""})),[e.feedSpec,e.artist]),n=(0,dt.s)(),s=(0,ut.t)(t),i=()=>{t&&n.logInteraction(t.closeButtonFactory().hitUiHide()),e.onClose()};return(0,A.jsx)(I.A,{contentLabel:p.Ru.get("live_events.label"),isOpen:!0,className:Et,onRequestClose:i,children:(0,A.jsxs)("section",{className:Mt,ref:s,children:[(0,A.jsx)("div",{className:Bt,children:(0,A.jsx)(Zt,{"aria-label":p.Ru.get("close"),iconOnly:N.M,size:"small",onClick:i})}),(0,A.jsxs)("div",{className:At,children:[(0,A.jsx)(wt._,{height:"48",width:"48",className:Lt,src:e.artist.imageUri}),(0,A.jsxs)("div",{className:Tt,children:[(0,A.jsx)(Y.E,{as:"h3",variant:"bodyMediumBold",className:Pt,"data-testid":"event-venue",children:e.artist.name}),(0,A.jsx)(Y.E,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:p.Ru.get("concerts.count_near_location",e.concerts.length,e.location.city)})]})]}),e.concerts.map(((e,n)=>(0,A.jsx)(Xt,{concert:e,position:n,modalSpec:t},e.uri)))]})})};var Zt=(0,Ut.Ay)(d.H).withConfig({displayName:"ConcertModal___StyledButtonTertiary",componentId:"sc-179c8vh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"});const qt=(0,a.memo)((e=>{const{event:t,onClose:n,feedSpec:s}=e,i=t?.concerts[0]?.concert,o=i?.artists[0],r=(0,a.useMemo)((()=>s?.groupedEventModalFactory({uri:o?.uri||""})),[s,o]),c=(0,dt.s)();if(!t||!i||!o)return null;return(0,A.jsx)(Yt,{artist:{imageUri:o.imageUri,name:o.name,uri:o.uri},location:{city:i.location,venue:i.venue},concerts:t.concerts.map((e=>({uri:`spotify:concert:${e.concert.id}`,title:e.concert.title,startDateIsoString:e.concert.date,location:{city:e.concert.location,venue:e.concert.venue}}))),onClose:()=>{r&&c.logInteraction(r.closeButtonFactory().hitUiHide()),n()}})}));var Qt=n(81799),Jt=n(74542),en=n(85375);const tn=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:s,location:i}=t,o=t.artists[0];return(0,A.jsx)(Jt.A,{uri:(0,b.B4D)(t.id).toURI(),title:(0,en.a9)(t),imageUrl:o.imageUri,date:t.startDate.localDate,subTitle:n?s:[s,i].join(p.Ru.getSeparator()),firstParty:(0,O.he)(t),onClick:a})})),nn=(0,a.memo)((e=>{const{event:t,onClick:n}=e,s=(0,a.useCallback)((e=>{e.preventDefault(),n(t)}),[t,n]),i=(0,St.l4)(t.openingDate),o=(0,St.l4)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,A.jsx)(Jt.A,{title:(0,en.a9)(r),subTitle:`${(0,St.WZ)(i,o)} • ${p.Ru.get("concerts.count",t.concerts.length)}`,onClick:s,imageUrl:c.imageUri,uri:(0,b.B4D)(r.id).toURI()})})),an=(0,a.memo)((e=>{const{event:t,position:n,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,b.B4D)(o.id).toURI(),l=(0,dt.s)(),d=(0,a.useMemo)((()=>s?.eventCardFactory({identifier:r??"",position:n,uri:c??""})),[s,r,c,n]),u=(0,ut.t)(d),m=e=>{i(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,A.jsx)("div",{ref:u,children:(0,A.jsx)(nn,{event:t,onClick:m})});return(0,A.jsx)("div",{ref:u,children:(0,A.jsx)(tn,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})}));var sn=n(3802);const on=(0,a.memo)((e=>{const{event:t,onClick:n}=e,s=(0,a.useCallback)((e=>{e.preventDefault(),n(t)}),[t,n]),i=(0,St.l4)(t.openingDate),o=(0,St.l4)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,A.jsx)(sn.A,{image:c?.imageUri,title:(0,en.a9)(r),subTitle:p.Ru.get("concerts.count",t.concerts.length),dateRange:(0,St.WZ)(i,o),uri:r?.id,onClick:s})})),rn=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:s,location:i}=t,o=t.artists[0],r=(0,St.l4)(t.startDate.localDate);return(0,A.jsx)(sn.A,{date:t.startDate.localDate,image:o?.imageUri,title:(0,en.a9)(t),subTitle:n?s:[s,i].join(p.Ru.getSeparator()),dateRange:(0,St.Y)(r),uri:(0,b.B4D)(t.id).toURI(),onClick:a})})),cn=(0,a.memo)((e=>{const{event:t,position:n,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,b.B4D)(o.id).toURI(),l=(0,dt.s)(),d=(0,a.useMemo)((()=>s?.eventRowFactory({identifier:r??"",position:n,uri:c??""})),[s,r,c,n]),u=(0,ut.t)(d),m=e=>{i(e)};if(t.concerts.length>1)return(0,A.jsx)("div",{ref:u,children:(0,A.jsx)(on,{event:t,onClick:m})});return(0,A.jsx)("div",{ref:u,children:(0,A.jsx)(rn,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})}));var ln=n(95309);const dn="MVPegsivznZB6gdkcnkH",un="vktIWsUczavLRrl4SkRt",mn="LOJZO2MnGW5dCIawF767",gn="tyc7QRlEJigVFIAeLGOB",hn="PoljWhTLU3MKqIx2gSPY",vn="ajxCNAuBJSgYfKUUBWBT",pn="WR2h2Li5XTrBn_Rdme_k",xn=(0,a.memo)((e=>{const{title:t="",identifier:n,position:s,events:i,feedSpec:o,onOpenGroupedEvent:r,layout:c}=e,l=(0,a.useMemo)((()=>o?.eventSectionFactory({identifier:n,position:s})),[o,n,s]),d=(0,ut.t)(l);return 0===i.length?null:(0,A.jsxs)("div",{className:dn,ref:d,children:["grid"===c&&(0,A.jsx)(ln.pZ,{value:"headered-grid",index:s,children:(0,A.jsx)(Qt.$,{total:i.length,title:t,showAll:!0,withEncoreCards:!1,children:i.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,A.jsx)(an,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},n?.id)}))})}),"list"===c&&(0,A.jsxs)("div",{children:[(0,A.jsx)(Y.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:un,children:t}),i.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,A.jsx)(cn,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},n?.id)}))]})]})}));var fn=n(15758),jn=n(5050),yn=n(96022);const Cn=async()=>{var e;return(await(e=jn.n.getInstance(),e.build().withHost(yn.tc).withPath("/v3/concerts/saved").withEndpointIdentifier("/v3/concerts/saved").send())).body};var kn=n(89494);const _n=(0,a.memo)((e=>{const{spec:t,layout:n}=e,[s,i]=(0,a.useState)(),o=(0,fn.I)({queryKey:["savedConcerts"],queryFn:Cn}),r=(0,kn.W)(),c=o.data?.userLocation,l=c||p.Ru.get("concerts.default_location");return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(f.Q,{children:`${p.Ru.get("live_events.label")}`}),o.data?.events.length?(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(xn,{title:p.Ru.get("concerts_upcoming"),identifier:"saved",position:0,events:o.data?.events,feedSpec:t,onOpenGroupedEvent:e=>{i(e);const t=e.concerts[0]?.concert.artistUris[0];r({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:n})}):(0,A.jsxs)("div",{className:mn,children:[(0,A.jsx)(Y.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:vn,children:p.Ru.get("concerts_interested_in_live_events")}),(0,A.jsx)(Y.E,{as:"p",className:pn,children:p.Ru.get("concerts_no_events_description")}),(0,A.jsx)(It.N,{to:"/concerts",className:gn,children:(0,A.jsx)(R.n,{as:"span",className:hn,children:p.Ru.get("concerts_browse_more_events")})})]}),(0,A.jsx)(Y.E,{variant:"marginal",semanticColor:"textSubdued",children:p.Ru.get("live_events.disclaimer")}),(0,A.jsx)(qt,{event:s,locationName:l,feedSpec:t,onClose:()=>i(void 0)})]})}));var Sn=n(30494),Rn=n(9498),bn=n(30299);const Nn=e=>{const[t]=e;if(!("visuals"in t.data))return;const[n]=t.data.visuals.avatarImage?.sources??[];return n?.url},Dn=e=>{const[t,n]=(0,a.useState)(!1),s=(0,a.useMemo)((()=>{if(!(0,bn.ys)(e))return;const[t]=e.concerts;if(!(0,bn.$V)(t))return;const n=(0,b.o_h)(t.data.uri);return e.spec?.eventCardFactory({identifier:n?.id,position:e.position,uri:t.data.uri})}),[e]),i=(0,dt.s)(),o=(0,ut.t)(s);if(!(0,bn.ys)(e))return;const[r]=e.concerts;if(!(0,bn.$V)(r))return;const[c]=r.data.artists.items,l=Nn(r.data.artists.items),{startDate:d,endDate:u}=(0,St.Vi)(e.concerts);return{isModalOpen:t,handleClick:e=>{e.preventDefault(),n(!0),s&&i.logInteraction(s.hitUiReveal())},handleClose:()=>n(!1),concert:{uri:r.data.uri,title:r.data.title,imageUrl:l,dateRange:(0,St.WZ)(d,u),startDateIsoString:r.data.startDateIsoString},artist:{uri:"uri"in c.data?c.data.uri:"",name:"profile"in c.data?c.data.profile.name:"",imageUri:l??""},location:{city:r.data.location.city,venue:r.data.location.name},totalConcerts:e.concerts.length,concerts:e.concerts.map((e=>(0,bn.$V)(e)?{uri:e.data.uri,title:e.data.title,location:{city:e.data.location.city,venue:e.data.location.name},startDateIsoString:e.data.startDateIsoString}:null)).filter(bn.se),ref:o}},In=e=>{const t=(0,dt.s)(),n=(0,a.useMemo)((()=>{const t=(0,b.o_h)((0,bn.$V)(e)?e.data.uri:"");return e.spec?.eventCardFactory({identifier:t?.id,position:e.position,uri:t?.toURI()??""})}),[e]);if(!(0,bn.$V)(e))return;return{imageUrl:Nn(e.data.artists.items)??"",uri:e.data.uri,title:e.data.title,subTitle:[e.data.location.name,e.data.location.city].join(p.Ru.getSeparator()),date:e.data.startDateIsoString,dateRange:(0,St.Y)(new Date(e.data.startDateIsoString)),handleClick:()=>n&&t.logInteraction(n.hitUiNavigate({destination:e.data.uri}))}},Un="V5SKycHF8ljKTRcTXM52",wn="CzWhnZA1N50SUeRTGNXg",Fn="kA_2O3KDNrREQ60CWtsH",En="eIRhBzZ6DVZOR5G3KjAQ",Mn="S7enEQMg1sLACPajLCs2",Bn="o9A1xL55C2qn_cIvXSfJ",An={ConcertGroup:e=>{const t=Dn(e);return t?(0,A.jsxs)("div",{ref:t.ref,children:[(0,A.jsx)(sn.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,image:t.concert.imageUrl??"",subTitle:p.Ru.get("concerts.count",t.concerts.length),dateRange:t.concert.dateRange}),t.isModalOpen&&(0,A.jsx)(Yt,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null},ConcertV2ResponseWrapper:e=>{const t=In(e);return t?(0,A.jsx)(sn.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,image:t.imageUrl,date:t.date,onClick:t.handleClick}):null}},Ln=e=>{const t=(0,a.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"all",position:e.position??0})),[e.spec,e.position]),n=(0,ut.t)(t);return 0===e.concerts.length?null:(0,A.jsxs)("div",{ref:n,className:Bn,children:[(0,A.jsx)(Y.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:e.title}),e.concerts.map(((e,n)=>{if(a=e.__typename,!Object.keys(An).includes(a??""))return null;var a;const s=An[e.__typename];return(0,A.jsx)(s,{position:n,spec:t,...e},n)})).filter(bn.se)]})},Tn={ConcertGroup:e=>{const t=Dn(e);return t?(0,A.jsxs)("div",{ref:t.ref,children:[(0,A.jsx)(Jt.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,imageUrl:t.concert.imageUrl,subTitle:`${t.concert.dateRange} • ${p.Ru.get("concerts.count",t.totalConcerts)}`}),t.isModalOpen&&(0,A.jsx)(Yt,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null},ConcertV2ResponseWrapper:e=>{const t=In(e);return t?(0,A.jsx)(Jt.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,imageUrl:t.imageUrl,date:t.date,onClick:t.handleClick}):null}},Pn=e=>{const t=(0,a.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"all",position:e.position??0})),[e.spec,e.position]),n=(0,ut.t)(t);return(0,A.jsx)("div",{ref:n,children:(0,A.jsx)(Qt.$,{total:e.concerts.length,title:e.title,showAll:!0,withEncoreCards:!1,children:e.concerts.map(((e,n)=>{if(a=e.__typename,!Object.keys(Tn).includes(a??""))return null;var a;const s=Tn[e.__typename];return(0,A.jsx)(s,{position:n,spec:t,...e},n)})).filter(bn.se)})})},zn=e=>{const t={"recommended-events":p.Ru.get("concerts_recommended_for_you"),"popular-events":p.Ru.get("concerts_popular")};return e in t?t[e]:p.Ru.get("concerts")},On=e=>{if(!(0,bn.eO)(e.data))return null;const t="grid"===e.layout?Pn:Ln;return(0,A.jsx)(t,{title:zn(e.data.key),concerts:e.data.concerts,spec:e.spec})},Hn="TsOt70CoNNJlItfzhvtF",Wn=e=>{if(!e?.match(/^(\d{4})-(\d{2})-(\d{2})$/))return p.Ru.get("live_events.all_events_tab");const[t,n,a]=e.split("-");return(0,St.Fn)(new Date(Number(t),Number(n)-1,Number(a)))},Gn=e=>{if(!(0,bn.dR)(e.data))return null;const t="grid"===e.layout?Pn:Ln;return(0,A.jsxs)("div",{children:[e.data.sections.map(((n,a)=>(0,A.jsx)(t,{position:a,title:Wn(n.key),concerts:n.concerts,spec:e.spec},a))),e.fetchNextPage&&(0,A.jsx)(R.n,{className:Hn,onClick:()=>e.fetchNextPage&&e.fetchNextPage(),children:p.Ru.get("concerts.load_more")})]})};var Kn=n(49097);const $n=new H.l("concertFeed","query","b18b88273824b0755eed2f4a94a485af0fe8cb29bf432f12adbc28697a63886d",null);var Vn=n(48125),Xn=n(4490);const Yn=(e,t=Kn.q)=>{const{request:n}=(0,a.useContext)(Vn.j),s=t({queryKey:["concert-feed",e.geoHash,e.geonameId,e.dateRange,e.conceptUris],queryFn:({pageParam:t})=>(0,Xn.c)(n,$n,{...e,paginationKey:""===t?null:t}),staleTime:6e4,gcTime:6e4,enabled:!!e.geoHash||!!e.geonameId,initialPageParam:"",getNextPageParam:e=>{if(!(0,bn.Bw)(e?.data?.liveEventsFeed))return"";const t=e.data.liveEventsFeed.sections.find((e=>"AllEvents"===e.__typename))??{};return(0,bn.dR)(t)?t.paginationKey:""}}),i=(e=>{const t=e?.reduce(((e,t)=>{const n=e?.liveEventsFeed,a=t?.data?.liveEventsFeed;if(!(0,bn.Bw)(a)||!(0,bn.Bw)(n))return e;const s=n.sections.find((e=>"AllEvents"===e.__typename))??{},i=(0,bn.dR)(s)?s.sections:[],o=a.sections.find((e=>"AllEvents"===e.__typename))??{},r=[...i,...(0,bn.dR)(o)?o.sections:[]].reduce(((e,t)=>{const n=e[t.key]??[];return(0,bn.ys)(t)?{...e,[t.key]:[...n,...t.concerts]}:e}),{}),c=Object.entries(r).map((([e,t])=>({key:e,concerts:t})));return{liveEventsFeed:{sections:a.sections.map((e=>"AllEvents"===e.__typename||(0,bn.dR)(e)?{sections:c,__typename:"AllEvents"}:e))}}}),{liveEventsFeed:{sections:[]}});return t})(s.data?.pages),o=s.data?.pages[s.data.pages.length-1]?.data?.liveEventsFeed,r=(0,bn.Bw)(o)?o.sections.find((e=>"AllEvents"===e.__typename)):void 0;return{...s,fetchNextPage:r&&(0,bn.dR)(r)&&r?.paginationKey?s.fetchNextPage:void 0,data:i}},Zn={AllEvents:Gn,LiveEventSection:On},qn=e=>{const{data:t,isLoading:n,error:a,fetchNextPage:s}=Yn({geoHash:e.location.geoHash||null,geonameId:e.location.geonameId||null,dateRange:e.dateRange?.from&&e.dateRange?.to?{from:(0,O.bU)(e.dateRange?.from),to:(0,O.bU)(e.dateRange.to)}:null,conceptUris:e.conceptUris});return n?(0,A.jsx)(Rn.LoadingPage,{hasError:!1,errorMessage:""}):!(0,bn.Bw)(t?.liveEventsFeed)||0===t.liveEventsFeed.sections.length||a?(0,A.jsx)(Sn.p,{title:p.Ru.get("concerts.error.no_concerts_found_title"),message:p.Ru.get("concerts.error.no_concerts_found_message",e.location.name),renderInline:!0}):(0,A.jsx)("div",{children:t?.liveEventsFeed.sections.map(((t,n)=>{if(!(0,bn.w1)(t))return null;const a=Zn[t.__typename];return(0,A.jsx)(a,{layout:e.layout,spec:e.spec,fetchNextPage:s,data:t},n)})).filter(bn.se)})};var Qn=n(44827),Jn=n(77092);const ea=new H.l("concertLocationDetails","query","b13f195349f188fee25480ae889d782852d68663bf07743c654244454750d681",null);var ta=n(95052);const na=e=>{if(!e||!("items"in e))return;const[t]=e.items;return t},aa=(e=S.g)=>{const t=(0,kn.W)(),{isAnonymous:n}=(0,o.d4)(ta.Ht),{location:s}=e(),[i]=(0,r.ok)(),{pathname:c}=(0,S.zy)(),l=(0,S.Zp)(),[,d]=s?.match(/^(\d+)/)??[],[u,m]=(0,a.useState)(d?{geonameId:Number(d)}:void 0),{data:g}=(h={geonameId:u?.geonameId?String(u?.geonameId):null,isAnonymous:n},(0,W.I)(ea,h,v));var h,v;const p=e=>{m(e),t({type:"click",intent:"change-live-events-location"}),e?.geonameId&&l({pathname:String(e.geonameId)===g?.me?.profile?.location?.geonameId?(0,O.nm)(c,void 0,void 0):(0,O.nm)(c,e.geonameId,e.fullName),search:new URLSearchParams(i).toString()})};if(u){const e=na(g?.concertLocations);return{location:{geonameId:u.geonameId??Number(e?.geonameId),geohash:u.geohash??e?.geoHash,name:u.name??e?.name},onChangeLocation:p}}const x=g?.me?.profile?.location,f=na(g?.concertLocations);return{location:x?.geoHash||f?.geonameId?{geohash:x?.geoHash??f?.geoHash,geonameId:Number(x?.geonameId??f?.geonameId),name:x?.name??f?.name}:void 0,onChangeLocation:p}};var sa=n(65446),ia=n(1620),oa=n(27602);const ra=()=>{const{isAnonymous:e}=(0,o.d4)(ta.Ht),[t,n]=(0,a.useState)("grid"),{location:s,onChangeLocation:S}=aa(),R=(0,h.NC)(oa.tH),b=(0,h.NC)(oa.mY),N=_t(),{conceptUris:D}=K(),[I,U]=(0,r.ok)(),{spec:w}=(0,ia.r)(v.s,{}),F=(0,a.useMemo)((()=>w.headerFactory()),[w]),E=(0,dt.s)(),M=e&&s?.name?p.Ru.get("live_events.location_concert_tickets",s.name):p.Ru.get("live_events.label"),B=()=>{const e=F.layoutToggleFactory().hitToggleState({stateBeforeToggle:t,stateAfterToggle:"grid"===t?"list":"grid"});E.logInteraction(e),n("grid"===t?"list":"grid")},L="interested"===I.get("filter"),T=L?l.$:d.H;return(0,A.jsxs)("section",{children:[(0,A.jsx)(f.Q,{children:(0,sa.zV)(s?.name)}),(0,A.jsxs)(j.z,{size:j.K.SMALL,backgroundColor:c.Hhe,children:[(0,A.jsx)(y.Y,{children:(0,A.jsx)(_.mm,{children:M})}),(0,A.jsx)(C.h,{children:(0,A.jsx)(k.X,{text:M})})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(x.K,{backgroundColor:c.Hhe}),(0,A.jsxs)("div",{className:i()(Un,"contentSpacing"),children:[(0,A.jsxs)("div",{className:wn,children:[L?(0,A.jsx)("div",{}):(0,A.jsxs)("div",{className:Fn,children:[(0,A.jsx)(Qn.A,{headerSpec:F,locationStr:s?.name??"",handleLocationChange:S}),(0,A.jsx)(Dt,{spec:w}),!e&&b&&(0,A.jsx)($,{geohash:s?.geohash,spec:F})]}),(0,A.jsxs)("div",{className:En,children:["grid"===t&&(0,A.jsx)(d.H,{"aria-label":p.Ru.get("concerts.feed_list_layout"),iconOnly:u.N,onClick:B,size:"small"}),"list"===t&&(0,A.jsx)(d.H,{"aria-label":p.Ru.get("concerts.feed_grid_layout"),iconOnly:m.D,onClick:B,size:"small"}),(0,A.jsx)(T,{size:"small",iconLeading:g.E,className:Mn,onClick:()=>U({filter:L?"":"interested"}),children:p.Ru.get("concerts_interested")})]})]}),L?(0,A.jsx)(_n,{layout:t,spec:w}):(0,A.jsxs)(A.Fragment,{children:[R&&(0,A.jsx)(Jn.k,{onLocationChange:S}),(0,A.jsx)(qn,{spec:w,layout:t,location:{geoHash:s?.geohash,geonameId:s?.geonameId?String(s.geonameId):"",name:s?.name??""},conceptUris:0===D.length?null:D,dateRange:N})]})]})]})]})}},7982:(e,t,n)=>{n.d(t,{DL:()=>r,Qe:()=>c,bU:()=>d,he:()=>l,nm:()=>o});var a=n(42534);const s=(e,t)=>{if(!e.includes(t))return;const n=e.split("/"),a=n.findIndex((e=>e===t));return n[a+1]},i=(e,t)=>{const n=["/concerts"];return(t.location||e.includes("location")&&null!==t.location)&&(n.push("location"),n.push(String(t.location??s(e,"location")))),(t.genre||e.includes("genre")&&null!==t.genre)&&(n.push("genre"),n.push(String(t.genre??s(e,"genre")))),n.join("/")},o=(e,t,n)=>{if(!t)return i(e,{location:null});const a=n?.normalize().replaceAll(/\W+/g,"-");return i(e,a?{location:`${t}-${a}`}:{location:t})},r=(e,t,n)=>{if(!t)return i(e,{genre:null});const a=n?.normalize().replaceAll(/\W+/g,"-");return i(e,a?{genre:`${t}-${a}`}:{genre:t})},c=e=>{if(!e)return;const t=e.split("-"),[n]=t;return{id:`spotify:concept:${n}`,name:t.reduce(((e,t,n)=>0===n?e:`${e} ${t}`),"").trim()}};const l=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),d=e=>(0,a.x)(e,{representation:"date"})}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map